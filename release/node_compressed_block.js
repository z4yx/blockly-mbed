// Do not edit this file; automatically generated by nodejs node_compress_block.js
 'use strict';

/*

 Visual Blocks Editor

 Copyright 2012 Google Inc.
 https://developers.google.com/blockly/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
Blockly.Blocks.variables={};Blockly.Blocks.procedures={};Blockly.Blocks.colour={};Blockly.Blocks.colour.HUE=20;Blockly.Blocks["colour_picker"]={init:function(){this.jsonInit({"message0":"%1","args0":[{"type":"field_colour","name":"COLOUR","colour":"#ff0000"}],"output":"Colour","colour":Blockly.Blocks.colour.HUE,"helpUrl":Blockly.Msg.COLOUR_PICKER_HELPURL});var thisBlock=this;this.setTooltip(function(){var parent=thisBlock.getParent();return parent&&parent.getInputsInline()&&parent.tooltip||Blockly.Msg.COLOUR_PICKER_TOOLTIP})}};
Blockly.Blocks["colour_random"]={init:function(){this.jsonInit({"message0":Blockly.Msg.COLOUR_RANDOM_TITLE,"output":"Colour","colour":Blockly.Blocks.colour.HUE,"tooltip":Blockly.Msg.COLOUR_RANDOM_TOOLTIP,"helpUrl":Blockly.Msg.COLOUR_RANDOM_HELPURL})}};
Blockly.Blocks["colour_rgb"]={init:function(){this.setHelpUrl(Blockly.Msg.COLOUR_RGB_HELPURL);this.setColour(Blockly.Blocks.colour.HUE);this.appendValueInput("RED").setCheck(Blockly.Types.NUMBER.checkList).setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_RGB_TITLE).appendField(Blockly.Msg.COLOUR_RGB_RED);this.appendValueInput("GREEN").setCheck(Blockly.Types.NUMBER.checkList).setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_RGB_GREEN);this.appendValueInput("BLUE").setCheck(Blockly.Types.NUMBER.checkList).setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_RGB_BLUE);
this.setOutput(true,"Colour");this.setTooltip(Blockly.Msg.COLOUR_RGB_TOOLTIP)}};
Blockly.Blocks["colour_blend"]={init:function(){this.setHelpUrl(Blockly.Msg.COLOUR_BLEND_HELPURL);this.setColour(Blockly.Blocks.colour.HUE);this.appendValueInput("COLOUR1").setCheck("Colour").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_BLEND_TITLE).appendField(Blockly.Msg.COLOUR_BLEND_COLOUR1);this.appendValueInput("COLOUR2").setCheck("Colour").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_BLEND_COLOUR2);this.appendValueInput("RATIO").setCheck(Blockly.Types.NUMBER.checkList).setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.COLOUR_BLEND_RATIO);
this.setOutput(true,"Colour");this.setTooltip(Blockly.Msg.COLOUR_BLEND_TOOLTIP)}};Blockly.Blocks.lists={};Blockly.Blocks.lists.HUE=260;Blockly.Blocks["lists_create_empty"]={init:function(){this.jsonInit({"message0":Blockly.Msg.LISTS_CREATE_EMPTY_TITLE,"output":"Array","colour":Blockly.Blocks.lists.HUE,"tooltip":Blockly.Msg.LISTS_CREATE_EMPTY_TOOLTIP,"helpUrl":Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL})}};
Blockly.Blocks["lists_create_with"]={init:function(){this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.itemCount_=3;this.updateShape_();this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP)},getVarType:function(varName){return new Blockly.Type({typeId:"Array",typeMsgName:"ARD_TYPE_CHAR",typeAtom:Blockly.Types.getChildBlockType(this),
typeContent:this.getContent(),typeLength:this.itemCount_,compatibleTypes:[]})},getContent:function(){var elements=new Array(this.itemCount_);var variable_list_name=Blockly.mbed.variableDB_.getName(this.getFieldValue("list_name"),Blockly.Variables.NAME_TYPE);for(var i=0;i<this.itemCount_;i++)elements[i]=Blockly.mbed.valueToCode(this,"ADD"+i,Blockly.mbed.ORDER_COMMA)||"null";var content="{"+elements.join(",")+"}";return content},mutationToDom:function(){var container=document.createElement("mutation");
container.setAttribute("items",this.itemCount_);return container},domToMutation:function(xmlElement){this.itemCount_=parseInt(xmlElement.getAttribute("items"),10);this.updateShape_()},decompose:function(workspace){var containerBlock=workspace.newBlock("lists_create_with_container");containerBlock.initSvg();var connection=containerBlock.getInput("STACK").connection;for(var i=0;i<this.itemCount_;i++){var itemBlock=workspace.newBlock("lists_create_with_item");itemBlock.initSvg();connection.connect(itemBlock.previousConnection);
connection=itemBlock.nextConnection}return containerBlock},compose:function(containerBlock){var itemBlock=containerBlock.getInputTargetBlock("STACK");var connections=[];while(itemBlock){connections.push(itemBlock.valueConnection_);itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}for(var i=0;i<this.itemCount_;i++){var connection=this.getInput("ADD"+i).connection.targetConnection;if(connection&&connections.indexOf(connection)==-1)connection.disconnect()}this.itemCount_=connections.length;
this.updateShape_();for(var i=0;i<this.itemCount_;i++)Blockly.Mutator.reconnect(connections[i],this,"ADD"+i)},saveConnections:function(containerBlock){var itemBlock=containerBlock.getInputTargetBlock("STACK");var i=0;while(itemBlock){var input=this.getInput("ADD"+i);itemBlock.valueConnection_=input&&input.connection.targetConnection;i++;itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}},updateShape_:function(){if(this.itemCount_&&this.getInput("EMPTY"))this.removeInput("EMPTY");
else if(!this.itemCount_&&!this.getInput("EMPTY"))this.appendDummyInput("EMPTY").appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE);for(var i=0;i<this.itemCount_;i++)if(!this.getInput("ADD"+i)){var input=this.appendValueInput("ADD"+i);if(i==0)input.appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH);if(i==1)input.appendField("ListName:").appendField(new Blockly.FieldVariable("item"),"list_name")}while(this.getInput("ADD"+i)){this.removeInput("ADD"+i);i++}}};
Blockly.Blocks["lists_create_with_container"]={init:function(){this.setColour(Blockly.Blocks.lists.HUE);this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP);this.contextMenu=false}};
Blockly.Blocks["lists_create_with_item"]={init:function(){this.setColour(Blockly.Blocks.lists.HUE);this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP);this.contextMenu=false}};
Blockly.Blocks["lists_repeat"]={init:function(){this.jsonInit({"message0":Blockly.Msg.LISTS_REPEAT_TITLE,"args0":[{"type":"input_value","name":"ITEM"},{"type":"input_value","name":"NUM","check":Blockly.Types.NUMBER.checkList}],"output":"Array","colour":Blockly.Blocks.lists.HUE,"tooltip":Blockly.Msg.LISTS_REPEAT_TOOLTIP,"helpUrl":Blockly.Msg.LISTS_REPEAT_HELPURL})}};
Blockly.Blocks["lists_length"]={init:function(){this.jsonInit({"message0":Blockly.Msg.LISTS_LENGTH_TITLE,"args0":[{"type":"input_value","name":"VALUE","check":Blockly.Types.TEXT.checkList.concat("Array")}],"output":Blockly.Types.NUMBER.output,"colour":Blockly.Blocks.lists.HUE,"tooltip":Blockly.Msg.LISTS_LENGTH_TOOLTIP,"helpUrl":Blockly.Msg.LISTS_LENGTH_HELPURL})}};
Blockly.Blocks["lists_isEmpty"]={init:function(){this.jsonInit({"message0":Blockly.Msg.LISTS_ISEMPTY_TITLE,"args0":[{"type":"input_value","name":"VALUE","check":Blockly.Types.TEXT.checkList.concat("Array")}],"output":Blockly.Types.BOOLEAN.output,"colour":Blockly.Blocks.lists.HUE,"tooltip":Blockly.Msg.LISTS_ISEMPTY_TOOLTIP,"helpUrl":Blockly.Msg.LISTS_ISEMPTY_HELPURL})}};
Blockly.Blocks["lists_indexOf"]={init:function(){var OPERATORS=[[Blockly.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[Blockly.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.setOutput(true,Blockly.Types.NUMBER.output);this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST);this.appendValueInput("FIND").appendField(new Blockly.FieldDropdown(OPERATORS),"END");this.setInputsInline(true);
this.setTooltip(Blockly.Msg.LISTS_INDEX_OF_TOOLTIP)}};
Blockly.Blocks["lists_getIndex"]={init:function(){var MODE=[[Blockly.Msg.LISTS_GET_INDEX_GET,"GET"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);var modeMenu=new Blockly.FieldDropdown(MODE,function(value){var isStatement=value=="REMOVE";this.sourceBlock_.updateStatement_(isStatement)});this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST);
this.appendDummyInput().appendField(modeMenu,"MODE").appendField("","SPACE");this.appendDummyInput("AT");if(Blockly.Msg.LISTS_GET_INDEX_TAIL)this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL);this.setInputsInline(true);this.setOutput(true);this.updateAt_(true);var thisBlock=this;this.setTooltip(function(){var combo=thisBlock.getFieldValue("MODE")+"_"+thisBlock.getFieldValue("WHERE");return Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_"+combo]})},mutationToDom:function(){var container=
document.createElement("mutation");var isStatement=!this.outputConnection;container.setAttribute("statement",isStatement);var isAt=this.getInput("AT").type==Blockly.INPUT_VALUE;container.setAttribute("at",isAt);return container},domToMutation:function(xmlElement){var isStatement=xmlElement.getAttribute("statement")=="true";this.updateStatement_(isStatement);var isAt=xmlElement.getAttribute("at")!="false";this.updateAt_(isAt)},updateStatement_:function(newStatement){var oldStatement=!this.outputConnection;
if(newStatement!=oldStatement){this.unplug(true,true);if(newStatement){this.setOutput(false);this.setPreviousStatement(true);this.setNextStatement(true)}else{this.setPreviousStatement(false);this.setNextStatement(false);this.setOutput(true)}}},updateAt_:function(isAt){this.removeInput("AT");this.removeInput("ORDINAL",true);if(isAt){this.appendValueInput("AT").setCheck(Blockly.Types.NUMBER.checkList);if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}else this.appendDummyInput("AT");
var menu=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(value){var newAt=value=="FROM_START"||value=="FROM_END";if(newAt!=isAt){var block=this.sourceBlock_;block.updateAt_(newAt);block.setFieldValue(value,"WHERE");return null}return undefined});this.getInput("AT").appendField(menu,"WHERE");if(Blockly.Msg.LISTS_GET_INDEX_TAIL)this.moveInputBefore("TAIL",null)}};
Blockly.Blocks["lists_setIndex"]={init:function(){var MODE=[[Blockly.Msg.LISTS_SET_INDEX_SET,"SET"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST);this.appendDummyInput().appendField(new Blockly.FieldDropdown(MODE),
"MODE").appendField("","SPACE");this.appendDummyInput("AT");this.appendValueInput("TO").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO);this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP);this.updateAt_(true);var thisBlock=this;this.setTooltip(function(){var combo=thisBlock.getFieldValue("MODE")+"_"+thisBlock.getFieldValue("WHERE");return Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_"+combo]})},mutationToDom:function(){var container=
document.createElement("mutation");var isAt=this.getInput("AT").type==Blockly.INPUT_VALUE;container.setAttribute("at",isAt);return container},domToMutation:function(xmlElement){var isAt=xmlElement.getAttribute("at")!="false";this.updateAt_(isAt)},updateAt_:function(isAt){this.removeInput("AT");this.removeInput("ORDINAL",true);if(isAt){this.appendValueInput("AT").setCheck(Blockly.Types.NUMBER.checkList);if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}else this.appendDummyInput("AT");
var menu=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(value){var newAt=value=="FROM_START"||value=="FROM_END";if(newAt!=isAt){var block=this.sourceBlock_;block.updateAt_(newAt);block.setFieldValue(value,"WHERE");return null}return undefined});this.moveInputBefore("AT","TO");if(this.getInput("ORDINAL"))this.moveInputBefore("ORDINAL","TO");this.getInput("AT").appendField(menu,"WHERE")}};
Blockly.Blocks["lists_getSublist"]={init:function(){this["WHERE_OPTIONS_1"]=[[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]];this["WHERE_OPTIONS_2"]=[[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);
this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);this.appendDummyInput("AT1");this.appendDummyInput("AT2");if(Blockly.Msg.LISTS_GET_SUBLIST_TAIL)this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL);this.setInputsInline(true);this.setOutput(true,"Array");this.updateAt_(1,true);this.updateAt_(2,true);this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var container=document.createElement("mutation");
var isAt1=this.getInput("AT1").type==Blockly.INPUT_VALUE;container.setAttribute("at1",isAt1);var isAt2=this.getInput("AT2").type==Blockly.INPUT_VALUE;container.setAttribute("at2",isAt2);return container},domToMutation:function(xmlElement){var isAt1=xmlElement.getAttribute("at1")=="true";var isAt2=xmlElement.getAttribute("at2")=="true";this.updateAt_(1,isAt1);this.updateAt_(2,isAt2)},updateAt_:function(n,isAt){this.removeInput("AT"+n);this.removeInput("ORDINAL"+n,true);if(isAt){this.appendValueInput("AT"+
n).setCheck(Blockly.Types.NUMBER.checkList);if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)this.appendDummyInput("ORDINAL"+n).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}else this.appendDummyInput("AT"+n);var menu=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+n],function(value){var newAt=value=="FROM_START"||value=="FROM_END";if(newAt!=isAt){var block=this.sourceBlock_;block.updateAt_(n,newAt);block.setFieldValue(value,"WHERE"+n);return null}return undefined});this.getInput("AT"+n).appendField(menu,"WHERE"+
n);if(n==1){this.moveInputBefore("AT1","AT2");if(this.getInput("ORDINAL1"))this.moveInputBefore("ORDINAL1","AT2")}if(Blockly.Msg.LISTS_GET_SUBLIST_TAIL)this.moveInputBefore("TAIL",null)}};
Blockly.Blocks["lists_sort"]={init:function(){this.jsonInit({"message0":Blockly.Msg.LISTS_SORT_TITLE,"args0":[{"type":"field_dropdown","name":"TYPE","options":[[Blockly.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[Blockly.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{"type":"field_dropdown","name":"DIRECTION","options":[[Blockly.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[Blockly.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{"type":"input_value","name":"LIST","check":"Array"}],
"output":"Array","colour":Blockly.Blocks.lists.HUE,"tooltip":Blockly.Msg.LISTS_SORT_TOOLTIP,"helpUrl":Blockly.Msg.LISTS_SORT_HELPURL})}};
Blockly.Blocks["lists_split"]={init:function(){var thisBlock=this;var dropdown=new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(newMode){thisBlock.updateType_(newMode)});this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL);this.setColour(Blockly.Blocks.lists.HUE);this.appendValueInput("INPUT").setCheck(Blockly.Types.TEXT.checkList).appendField(dropdown,"MODE");this.appendValueInput("DELIM").setCheck(Blockly.Types.TEXT.checkList).appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER);
this.setInputsInline(true);this.setOutput(true,"Array");this.setTooltip(function(){var mode=thisBlock.getFieldValue("MODE");if(mode=="SPLIT")return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;else if(mode=="JOIN")return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw"Unknown mode: "+mode;})},updateType_:function(newMode){if(newMode=="SPLIT"){this.outputConnection.setCheck("Array");this.getInput("INPUT").setCheck(Blockly.Types.TEXT.checkList)}else{this.outputConnection.setCheck(Blockly.Types.TEXT.checkList);
this.getInput("INPUT").setCheck("Array")}},mutationToDom:function(){var container=document.createElement("mutation");container.setAttribute("mode",this.getFieldValue("MODE"));return container},domToMutation:function(xmlElement){this.updateType_(xmlElement.getAttribute("mode"))}};Blockly.Blocks.logic={};Blockly.Blocks.logic.HUE=210;
Blockly.Blocks["controls_if"]={init:function(){this.setHelpUrl(Blockly.Msg.CONTROLS_IF_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.appendValueInput("IF0").setCheck(Blockly.Types.BOOLEAN.checkList).appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);this.appendStatementInput("DO0").appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);this.setPreviousStatement(true);this.setNextStatement(true);this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));var thisBlock=this;this.setTooltip(function(){if(!thisBlock.elseifCount_&&
!thisBlock.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_1;else if(!thisBlock.elseifCount_&&thisBlock.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_2;else if(thisBlock.elseifCount_&&!thisBlock.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_3;else if(thisBlock.elseifCount_&&thisBlock.elseCount_)return Blockly.Msg.CONTROLS_IF_TOOLTIP_4;return""});this.elseifCount_=0;this.elseCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var container=document.createElement("mutation");
if(this.elseifCount_)container.setAttribute("elseif",this.elseifCount_);if(this.elseCount_)container.setAttribute("else",1);return container},domToMutation:function(xmlElement){this.elseifCount_=parseInt(xmlElement.getAttribute("elseif"),10)||0;this.elseCount_=parseInt(xmlElement.getAttribute("else"),10)||0;this.updateShape_()},decompose:function(workspace){var containerBlock=workspace.newBlock("controls_if_if");containerBlock.initSvg();var connection=containerBlock.nextConnection;for(var i=1;i<=
this.elseifCount_;i++){var elseifBlock=workspace.newBlock("controls_if_elseif");elseifBlock.initSvg();connection.connect(elseifBlock.previousConnection);connection=elseifBlock.nextConnection}if(this.elseCount_){var elseBlock=workspace.newBlock("controls_if_else");elseBlock.initSvg();connection.connect(elseBlock.previousConnection)}return containerBlock},compose:function(containerBlock){var clauseBlock=containerBlock.nextConnection.targetBlock();this.elseifCount_=0;this.elseCount_=0;var valueConnections=
[null];var statementConnections=[null];var elseStatementConnection=null;while(clauseBlock){switch(clauseBlock.type){case "controls_if_elseif":this.elseifCount_++;valueConnections.push(clauseBlock.valueConnection_);statementConnections.push(clauseBlock.statementConnection_);break;case "controls_if_else":this.elseCount_++;elseStatementConnection=clauseBlock.statementConnection_;break;default:throw"Unknown block type.";}clauseBlock=clauseBlock.nextConnection&&clauseBlock.nextConnection.targetBlock()}this.updateShape_();
for(var i=1;i<=this.elseifCount_;i++){Blockly.Mutator.reconnect(valueConnections[i],this,"IF"+i);Blockly.Mutator.reconnect(statementConnections[i],this,"DO"+i)}Blockly.Mutator.reconnect(elseStatementConnection,this,"ELSE")},saveConnections:function(containerBlock){var clauseBlock=containerBlock.nextConnection.targetBlock();var i=1;while(clauseBlock){switch(clauseBlock.type){case "controls_if_elseif":var inputIf=this.getInput("IF"+i);var inputDo=this.getInput("DO"+i);clauseBlock.valueConnection_=inputIf&&
inputIf.connection.targetConnection;clauseBlock.statementConnection_=inputDo&&inputDo.connection.targetConnection;i++;break;case "controls_if_else":var inputDo=this.getInput("ELSE");clauseBlock.statementConnection_=inputDo&&inputDo.connection.targetConnection;break;default:throw"Unknown block type.";}clauseBlock=clauseBlock.nextConnection&&clauseBlock.nextConnection.targetBlock()}},updateShape_:function(){if(this.getInput("ELSE"))this.removeInput("ELSE");var i=1;while(this.getInput("IF"+i)){this.removeInput("IF"+
i);this.removeInput("DO"+i);i++}for(var i=1;i<=this.elseifCount_;i++){this.appendValueInput("IF"+i).setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF);this.appendStatementInput("DO"+i).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN)}if(this.elseCount_)this.appendStatementInput("ELSE").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE)}};
Blockly.Blocks["controls_if_if"]={init:function(){this.setColour(Blockly.Blocks.logic.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_IF_TITLE_IF);this.setNextStatement(true);this.setTooltip(Blockly.Msg.CONTROLS_IF_IF_TOOLTIP);this.contextMenu=false}};
Blockly.Blocks["controls_if_elseif"]={init:function(){this.setColour(Blockly.Blocks.logic.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP);this.contextMenu=false}};
Blockly.Blocks["controls_if_else"]={init:function(){this.setColour(Blockly.Blocks.logic.HUE);this.appendDummyInput().appendField(Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE);this.setPreviousStatement(true);this.setTooltip(Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP);this.contextMenu=false}};
Blockly.Blocks["logic_compare"]={init:function(){var OPERATORS=this.RTL?[["\x3d","EQ"],["\u2260","NEQ"],["\x3e","LT"],["\u2265","LTE"],["\x3c","GT"],["\u2264","GTE"]]:[["\x3d","EQ"],["\u2260","NEQ"],["\x3c","LT"],["\u2264","LTE"],["\x3e","GT"],["\u2265","GTE"]];this.setHelpUrl(Blockly.Msg.LOGIC_COMPARE_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.setOutput(true,Blockly.Types.BOOLEAN.output);this.appendValueInput("A");this.appendValueInput("B").appendField(new Blockly.FieldDropdown(OPERATORS),
"OP");this.setInputsInline(true);var thisBlock=this;this.setTooltip(function(){var op=thisBlock.getFieldValue("OP");var TOOLTIPS={"EQ":Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ,"NEQ":Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ,"LT":Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT,"LTE":Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE,"GT":Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT,"GTE":Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE};return TOOLTIPS[op]});this.prevBlocks_=[null,null]},onchange:function(e){var blockA=this.getInputTargetBlock("A");
var blockB=this.getInputTargetBlock("B");if(blockA&&blockB&&!blockA.outputConnection.checkType_(blockB.outputConnection)){Blockly.Events.setGroup(e.group);for(var i=0;i<this.prevBlocks_.length;i++){var block=this.prevBlocks_[i];if(block===blockA||block===blockB){block.unplug();block.bumpNeighbours_()}}Blockly.Events.setGroup(false)}this.prevBlocks_[0]=blockA;this.prevBlocks_[1]=blockB},getBlockType:function(){return Blockly.Types.BOOLEAN}};
Blockly.Blocks["logic_operation"]={init:function(){var OPERATORS=[[Blockly.Msg.LOGIC_OPERATION_AND,"AND"],[Blockly.Msg.LOGIC_OPERATION_OR,"OR"]];this.setHelpUrl(Blockly.Msg.LOGIC_OPERATION_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.setOutput(true,Blockly.Types.BOOLEAN.output);this.appendValueInput("A").setCheck(Blockly.Types.BOOLEAN.checkList);this.appendValueInput("B").setCheck(Blockly.Types.BOOLEAN.checkList).appendField(new Blockly.FieldDropdown(OPERATORS),"OP");this.setInputsInline(true);
var thisBlock=this;this.setTooltip(function(){var op=thisBlock.getFieldValue("OP");var TOOLTIPS={"AND":Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND,"OR":Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR};return TOOLTIPS[op]})},getBlockType:function(){return Blockly.Types.BOOLEAN}};
Blockly.Blocks["logic_negate"]={init:function(){this.jsonInit({"message0":Blockly.Msg.LOGIC_NEGATE_TITLE,"args0":[{"type":"input_value","name":"BOOL","check":Blockly.Types.BOOLEAN.checkList}],"output":Blockly.Types.BOOLEAN.output,"colour":Blockly.Blocks.logic.HUE,"tooltip":Blockly.Msg.LOGIC_NEGATE_TOOLTIP,"helpUrl":Blockly.Msg.LOGIC_NEGATE_HELPURL})},getBlockType:function(){return Blockly.Types.BOOLEAN}};
Blockly.Blocks["logic_boolean"]={init:function(){this.jsonInit({"message0":"%1","args0":[{"type":"field_dropdown","name":"BOOL","options":[[Blockly.Msg.LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.Msg.LOGIC_BOOLEAN_FALSE,"FALSE"]]}],"output":Blockly.Types.BOOLEAN.output,"colour":Blockly.Blocks.logic.HUE,"tooltip":Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP,"helpUrl":Blockly.Msg.LOGIC_BOOLEAN_HELPURL})},getBlockType:function(){return Blockly.Types.BOOLEAN}};
Blockly.Blocks["logic_null"]={init:function(){this.jsonInit({"message0":Blockly.Msg.LOGIC_NULL,"output":Blockly.Types.NULL.output,"colour":Blockly.Blocks.logic.HUE,"tooltip":Blockly.Msg.LOGIC_NULL_TOOLTIP,"helpUrl":Blockly.Msg.LOGIC_NULL_HELPURL})},getBlockType:function(){return Blockly.Types.NULL}};
Blockly.Blocks["logic_ternary"]={init:function(){this.setHelpUrl(Blockly.Msg.LOGIC_TERNARY_HELPURL);this.setColour(Blockly.Blocks.logic.HUE);this.appendValueInput("IF").setCheck(Blockly.Types.BOOLEAN.checkList).appendField(Blockly.Msg.LOGIC_TERNARY_CONDITION);this.appendValueInput("THEN").appendField(Blockly.Msg.LOGIC_TERNARY_IF_TRUE);this.appendValueInput("ELSE").appendField(Blockly.Msg.LOGIC_TERNARY_IF_FALSE);this.setOutput(true);this.setTooltip(Blockly.Msg.LOGIC_TERNARY_TOOLTIP);this.prevParentConnection_=
null},onchange:function(e){var blockA=this.getInputTargetBlock("THEN");var blockB=this.getInputTargetBlock("ELSE");var parentConnection=this.outputConnection.targetConnection;if((blockA||blockB)&&parentConnection)for(var i=0;i<2;i++){var block=i==1?blockA:blockB;if(block&&!block.outputConnection.checkType_(parentConnection)){Blockly.Events.setGroup(e.group);if(parentConnection===this.prevParentConnection_){this.unplug();parentConnection.getSourceBlock().bumpNeighbours_()}else{block.unplug();block.bumpNeighbours_()}Blockly.Events.setGroup(false)}}this.prevParentConnection_=
parentConnection}};Blockly.Blocks.loops={};Blockly.Blocks.loops.HUE=120;Blockly.Blocks["controls_repeat_ext"]={init:function(){this.jsonInit({"message0":Blockly.Msg.CONTROLS_REPEAT_TITLE,"args0":[{"type":"input_value","name":"TIMES","check":Blockly.Types.NUMBER.checkList}],"previousStatement":null,"nextStatement":null,"colour":Blockly.Blocks.loops.HUE,"tooltip":Blockly.Msg.CONTROLS_REPEAT_TOOLTIP,"helpUrl":Blockly.Msg.CONTROLS_REPEAT_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_REPEAT_INPUT_DO)}};
Blockly.Blocks["controls_repeat"]={init:function(){this.jsonInit({"message0":Blockly.Msg.CONTROLS_REPEAT_TITLE,"args0":[{"type":"field_number","name":"TIMES","check":Blockly.Types.NUMBER.checkList,"text":"10"}],"previousStatement":null,"nextStatement":null,"colour":Blockly.Blocks.loops.HUE,"tooltip":Blockly.Msg.CONTROLS_REPEAT_TOOLTIP,"helpUrl":Blockly.Msg.CONTROLS_REPEAT_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_REPEAT_INPUT_DO);this.getField("TIMES").setValidator(Blockly.FieldTextInput.nonnegativeIntegerValidator)}};
Blockly.Blocks["controls_whileUntil"]={init:function(){var OPERATORS=[[Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE,"WHILE"],[Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL,"UNTIL"]];this.setHelpUrl(Blockly.Msg.CONTROLS_WHILEUNTIL_HELPURL);this.setColour(Blockly.Blocks.loops.HUE);this.appendValueInput("BOOL").setCheck(Blockly.Types.BOOLEAN.checkList).appendField(new Blockly.FieldDropdown(OPERATORS),"MODE");this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_WHILEUNTIL_INPUT_DO);this.setPreviousStatement(true);
this.setNextStatement(true);var thisBlock=this;this.setTooltip(function(){var op=thisBlock.getFieldValue("MODE");var TOOLTIPS={"WHILE":Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE,"UNTIL":Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL};return TOOLTIPS[op]})}};
Blockly.Blocks["controls_for"]={init:function(){this.jsonInit({"message0":Blockly.Msg.CONTROLS_FOR_TITLE,"args0":[{"type":"field_variable","name":"VAR","variable":null},{"type":"input_value","name":"FROM","check":Blockly.Types.NUMBER.checkList,"align":"RIGHT"},{"type":"input_value","name":"TO","check":Blockly.Types.NUMBER.checkList,"align":"RIGHT"},{"type":"input_value","name":"BY","check":Blockly.Types.NUMBER.checkList,"align":"RIGHT"}],"inputsInline":true,"previousStatement":null,"nextStatement":null,
"colour":Blockly.Blocks.loops.HUE,"helpUrl":Blockly.Msg.CONTROLS_FOR_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_FOR_INPUT_DO);var thisBlock=this;this.setTooltip(function(){return Blockly.Msg.CONTROLS_FOR_TOOLTIP.replace("%1",thisBlock.getFieldValue("VAR"))})},customContextMenu:function(options){if(!this.isCollapsed()){var option={enabled:true};var name=this.getFieldValue("VAR");option.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",name);var xmlField=goog.dom.createDom("field",
null,name);xmlField.setAttribute("name","VAR");var xmlBlock=goog.dom.createDom("block",null,xmlField);xmlBlock.setAttribute("type","variables_get");option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option)}},getVarType:function(varName){return Blockly.Types.NUMBER}};
Blockly.Blocks["controls_forEach"]={init:function(){this.jsonInit({"message0":Blockly.Msg.CONTROLS_FOREACH_TITLE,"args0":[{"type":"field_variable","name":"VAR","variable":null},{"type":"input_value","name":"LIST","check":Blockly.Types.ARRAY.checkList}],"previousStatement":null,"nextStatement":null,"colour":Blockly.Blocks.loops.HUE,"helpUrl":Blockly.Msg.CONTROLS_FOREACH_HELPURL});this.appendStatementInput("DO").appendField(Blockly.Msg.CONTROLS_FOREACH_INPUT_DO);var thisBlock=this;this.setTooltip(function(){return Blockly.Msg.CONTROLS_FOREACH_TOOLTIP.replace("%1",
thisBlock.getFieldValue("VAR"))})},customContextMenu:Blockly.Blocks["controls_for"].customContextMenu,getVarType:function(varName){return Blockly.Types.NUMBER}};
Blockly.Blocks["controls_flow_statements"]={init:function(){var OPERATORS=[[Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,"BREAK"],[Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,"CONTINUE"]];this.setHelpUrl(Blockly.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL);this.setColour(Blockly.Blocks.loops.HUE);this.appendDummyInput().appendField(new Blockly.FieldDropdown(OPERATORS),"FLOW");this.setPreviousStatement(true);var thisBlock=this;this.setTooltip(function(){var op=thisBlock.getFieldValue("FLOW");
var TOOLTIPS={"BREAK":Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,"CONTINUE":Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE};return TOOLTIPS[op]})},onchange:function(e){var legal=false;var block=this;do{if(this.LOOP_TYPES.indexOf(block.type)!=-1){legal=true;break}block=block.getSurroundParent()}while(block);if(legal)this.setWarningText(null);else this.setWarningText(Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING)},LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach",
"controls_for","controls_whileUntil"]};Blockly.Blocks.math={};Blockly.Blocks.math.HUE=230;
Blockly.Blocks["math_number"]={init:function(){this.setHelpUrl(Blockly.Msg.MATH_NUMBER_HELPURL);this.setColour(Blockly.Blocks.math.HUE);this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"NUM");this.setOutput(true,Blockly.Types.NUMBER.output);var thisBlock=this;this.setTooltip(function(){var parent=thisBlock.getParent();return parent&&parent.getInputsInline()&&parent.tooltip||Blockly.Msg.MATH_NUMBER_TOOLTIP})},getBlockType:function(){var numString=
this.getFieldValue("NUM");return Blockly.Types.identifyNumber(numString)}};
Blockly.Blocks["math_arithmetic"]={init:function(){this.jsonInit({"message0":"%1 %2 %3","args0":[{"type":"input_value","name":"A","check":Blockly.Types.NUMBER.checkList},{"type":"field_dropdown","name":"OP","options":[[Blockly.Msg.MATH_ADDITION_SYMBOL,"ADD"],[Blockly.Msg.MATH_SUBTRACTION_SYMBOL,"MINUS"],[Blockly.Msg.MATH_MULTIPLICATION_SYMBOL,"MULTIPLY"],[Blockly.Msg.MATH_DIVISION_SYMBOL,"DIVIDE"],[Blockly.Msg.MATH_POWER_SYMBOL,"POWER"],["\x26","BITWISE_AND"],["|","BITWISE_OR"]]},{"type":"input_value",
"name":"B","check":Blockly.Types.NUMBER.checkList}],"inputsInline":true,"output":Blockly.Types.NUMBER.output,"colour":Blockly.Blocks.math.HUE,"helpUrl":Blockly.Msg.MATH_ARITHMETIC_HELPURL});var thisBlock=this;this.setTooltip(function(){var mode=thisBlock.getFieldValue("OP");var TOOLTIPS={"ADD":Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD,"MINUS":Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS,"MULTIPLY":Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY,"DIVIDE":Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE,"POWER":Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_POWER};
return TOOLTIPS[mode]})}};
Blockly.Blocks["math_single"]={init:function(){this.jsonInit({"message0":"%1 %2","args0":[{"type":"field_dropdown","name":"OP","options":[[Blockly.Msg.MATH_SINGLE_OP_ROOT,"ROOT"],[Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE,"ABS"],["-","NEG"],["~","BITWISE_NOT"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{"type":"input_value","name":"NUM","check":Blockly.Types.DECIMAL.checkList}],"output":Blockly.Types.DECIMAL.output,"colour":Blockly.Blocks.math.HUE,"helpUrl":Blockly.Msg.MATH_SINGLE_HELPURL});var thisBlock=
this;this.setTooltip(function(){var mode=thisBlock.getFieldValue("OP");var TOOLTIPS={"ROOT":Blockly.Msg.MATH_SINGLE_TOOLTIP_ROOT,"ABS":Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS,"NEG":Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG,"LN":Blockly.Msg.MATH_SINGLE_TOOLTIP_LN,"LOG10":Blockly.Msg.MATH_SINGLE_TOOLTIP_LOG10,"EXP":Blockly.Msg.MATH_SINGLE_TOOLTIP_EXP,"POW10":Blockly.Msg.MATH_SINGLE_TOOLTIP_POW10};return TOOLTIPS[mode]})},getBlockType:function(){return Blockly.Types.DECIMAL}};
Blockly.Blocks["math_trig"]={init:function(){this.jsonInit({"message0":"%1 %2","args0":[{"type":"field_dropdown","name":"OP","options":[[Blockly.Msg.MATH_TRIG_SIN,"SIN"],[Blockly.Msg.MATH_TRIG_COS,"COS"],[Blockly.Msg.MATH_TRIG_TAN,"TAN"],[Blockly.Msg.MATH_TRIG_ASIN,"ASIN"],[Blockly.Msg.MATH_TRIG_ACOS,"ACOS"],[Blockly.Msg.MATH_TRIG_ATAN,"ATAN"]]},{"type":"input_value","name":"NUM","check":Blockly.Types.DECIMAL.checkList}],"output":Blockly.Types.DECIMAL.output,"colour":Blockly.Blocks.math.HUE,"helpUrl":Blockly.Msg.MATH_TRIG_HELPURL});
var thisBlock=this;this.setTooltip(function(){var mode=thisBlock.getFieldValue("OP");var TOOLTIPS={"SIN":Blockly.Msg.MATH_TRIG_TOOLTIP_SIN,"COS":Blockly.Msg.MATH_TRIG_TOOLTIP_COS,"TAN":Blockly.Msg.MATH_TRIG_TOOLTIP_TAN,"ASIN":Blockly.Msg.MATH_TRIG_TOOLTIP_ASIN,"ACOS":Blockly.Msg.MATH_TRIG_TOOLTIP_ACOS,"ATAN":Blockly.Msg.MATH_TRIG_TOOLTIP_ATAN};return TOOLTIPS[mode]})},getBlockType:function(){return Blockly.Types.DECIMAL}};
Blockly.Blocks["math_constant"]={init:function(){this.jsonInit({"message0":"%1","args0":[{"type":"field_dropdown","name":"CONSTANT","options":[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\u00bd)","SQRT1_2"],["\u221e","INFINITY"]]}],"output":Blockly.Types.DECIMAL.output,"colour":Blockly.Blocks.math.HUE,"tooltip":Blockly.Msg.MATH_CONSTANT_TOOLTIP,"helpUrl":Blockly.Msg.MATH_CONSTANT_HELPURL})}};
Blockly.Blocks["math_number_property"]={init:function(){var PROPERTIES=[[Blockly.Msg.MATH_IS_EVEN,"EVEN"],[Blockly.Msg.MATH_IS_ODD,"ODD"],[Blockly.Msg.MATH_IS_PRIME,"PRIME"],[Blockly.Msg.MATH_IS_WHOLE,"WHOLE"],[Blockly.Msg.MATH_IS_POSITIVE,"POSITIVE"],[Blockly.Msg.MATH_IS_NEGATIVE,"NEGATIVE"],[Blockly.Msg.MATH_IS_DIVISIBLE_BY,"DIVISIBLE_BY"]];this.setColour(Blockly.Blocks.math.HUE);this.appendValueInput("NUMBER_TO_CHECK").setCheck(Blockly.Types.NUMBER.checkList);var dropdown=new Blockly.FieldDropdown(PROPERTIES,
function(option){var divisorInput=option=="DIVISIBLE_BY";this.sourceBlock_.updateShape_(divisorInput)});this.appendDummyInput().appendField(dropdown,"PROPERTY");this.setInputsInline(true);this.setOutput(true,Blockly.Types.BOOLEAN.output);this.setTooltip(Blockly.Msg.MATH_IS_TOOLTIP)},mutationToDom:function(){var container=document.createElement("mutation");var divisorInput=this.getFieldValue("PROPERTY")=="DIVISIBLE_BY";container.setAttribute("divisor_input",divisorInput);return container},domToMutation:function(xmlElement){var divisorInput=
xmlElement.getAttribute("divisor_input")=="true";this.updateShape_(divisorInput)},updateShape_:function(divisorInput){var inputExists=this.getInput("DIVISOR");if(divisorInput){if(!inputExists)this.appendValueInput("DIVISOR").setCheck(Blockly.Types.NUMBER.checkList)}else if(inputExists)this.removeInput("DIVISOR")},getBlockType:function(){return Blockly.Types.BOOLEAN}};
Blockly.Blocks["math_change"]={init:function(){this.jsonInit({"message0":Blockly.Msg.MATH_CHANGE_TITLE,"args0":[{"type":"field_variable","name":"VAR","variable":Blockly.Msg.MATH_CHANGE_TITLE_ITEM},{"type":"input_value","name":"DELTA","check":Blockly.Types.NUMBER.checkList,"align":"RIGHT"}],"previousStatement":null,"nextStatement":null,"colour":Blockly.Blocks.math.HUE,"helpUrl":Blockly.Msg.MATH_CHANGE_HELPURL});var thisBlock=this;this.setTooltip(function(){return Blockly.Msg.MATH_CHANGE_TOOLTIP.replace("%1",
thisBlock.getFieldValue("VAR"))})},getVarType:function(varName){return Blockly.Types.NUMBER}};
Blockly.Blocks["math_round"]={init:function(){this.jsonInit({"message0":"%1 %2","args0":[{"type":"field_dropdown","name":"OP","options":[[Blockly.Msg.MATH_ROUND_OPERATOR_ROUND,"ROUND"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP,"ROUNDUP"],[Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN,"ROUNDDOWN"]]},{"type":"input_value","name":"NUM","check":Blockly.Types.DECIMAL.checkList}],"output":Blockly.Types.DECIMAL.output,"colour":Blockly.Blocks.math.HUE,"tooltip":Blockly.Msg.MATH_ROUND_TOOLTIP,"helpUrl":Blockly.Msg.MATH_ROUND_HELPURL})},
getBlockType:function(){return Blockly.Types.DECIMAL}};
Blockly.Blocks["math_on_list"]={init:function(){var OPERATORS=[[Blockly.Msg.MATH_ONLIST_OPERATOR_SUM,"SUM"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MIN,"MIN"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MAX,"MAX"],[Blockly.Msg.MATH_ONLIST_OPERATOR_AVERAGE,"AVERAGE"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MEDIAN,"MEDIAN"],[Blockly.Msg.MATH_ONLIST_OPERATOR_MODE,"MODE"],[Blockly.Msg.MATH_ONLIST_OPERATOR_STD_DEV,"STD_DEV"],[Blockly.Msg.MATH_ONLIST_OPERATOR_RANDOM,"RANDOM"]];var thisBlock=this;this.setHelpUrl(Blockly.Msg.MATH_ONLIST_HELPURL);
this.setColour(Blockly.Blocks.math.HUE);this.setOutput(true,Blockly.Types.NUMBER.output);var dropdown=new Blockly.FieldDropdown(OPERATORS,function(newOp){thisBlock.updateType_(newOp)});this.appendValueInput("LIST").setCheck(Blockly.Types.ARRAY.checkList).appendField(dropdown,"OP");this.setTooltip(function(){var mode=thisBlock.getFieldValue("OP");var TOOLTIPS={"SUM":Blockly.Msg.MATH_ONLIST_TOOLTIP_SUM,"MIN":Blockly.Msg.MATH_ONLIST_TOOLTIP_MIN,"MAX":Blockly.Msg.MATH_ONLIST_TOOLTIP_MAX,"AVERAGE":Blockly.Msg.MATH_ONLIST_TOOLTIP_AVERAGE,
"MEDIAN":Blockly.Msg.MATH_ONLIST_TOOLTIP_MEDIAN,"MODE":Blockly.Msg.MATH_ONLIST_TOOLTIP_MODE,"STD_DEV":Blockly.Msg.MATH_ONLIST_TOOLTIP_STD_DEV,"RANDOM":Blockly.Msg.MATH_ONLIST_TOOLTIP_RANDOM};return TOOLTIPS[mode]})},updateType_:function(newOp){if(newOp=="MODE")this.outputConnection.setCheck(Blockly.Types.ARRAY.output);else this.outputConnection.setCheck(Blockly.Types.NUMBER.output)},mutationToDom:function(){var container=document.createElement("mutation");container.setAttribute("op",this.getFieldValue("OP"));
return container},domToMutation:function(xmlElement){this.updateType_(xmlElement.getAttribute("op"))}};
Blockly.Blocks["math_modulo"]={init:function(){this.jsonInit({"message0":Blockly.Msg.MATH_MODULO_TITLE,"args0":[{"type":"input_value","name":"DIVIDEND","check":Blockly.Types.NUMBER.checkList},{"type":"input_value","name":"DIVISOR","check":Blockly.Types.NUMBER.checkList}],"inputsInline":true,"output":Blockly.Types.NUMBER.output,"colour":Blockly.Blocks.math.HUE,"tooltip":Blockly.Msg.MATH_MODULO_TOOLTIP,"helpUrl":Blockly.Msg.MATH_MODULO_HELPURL})},getBlockType:function(){return Blockly.Types.NUMBER}};
Blockly.Blocks["math_constrain"]={init:function(){this.jsonInit({"message0":Blockly.Msg.MATH_CONSTRAIN_TITLE,"args0":[{"type":"input_value","name":"VALUE","check":Blockly.Types.NUMBER.checkList},{"type":"input_value","name":"LOW","check":Blockly.Types.NUMBER.checkList},{"type":"input_value","name":"HIGH","check":Blockly.Types.NUMBER.checkList}],"inputsInline":true,"output":Blockly.Types.NUMBER.output,"colour":Blockly.Blocks.math.HUE,"tooltip":Blockly.Msg.MATH_CONSTRAIN_TOOLTIP,"helpUrl":Blockly.Msg.MATH_CONSTRAIN_HELPURL})}};
Blockly.Blocks["math_random_int"]={init:function(){this.jsonInit({"message0":Blockly.Msg.MATH_RANDOM_INT_TITLE,"args0":[{"type":"input_value","name":"FROM","check":Blockly.Types.NUMBER.checkList},{"type":"input_value","name":"TO","check":Blockly.Types.NUMBER.checkList}],"inputsInline":true,"output":Blockly.Types.NUMBER.output,"colour":Blockly.Blocks.math.HUE,"tooltip":Blockly.Msg.MATH_RANDOM_INT_TOOLTIP,"helpUrl":Blockly.Msg.MATH_RANDOM_INT_HELPURL})},getBlockType:function(){return Blockly.Types.NUMBER}};
Blockly.Blocks["math_random_float"]={init:function(){this.jsonInit({"message0":Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM,"output":Blockly.Types.DECIMAL.output,"colour":Blockly.Blocks.math.HUE,"tooltip":Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP,"helpUrl":Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL})},getBlockType:function(){return Blockly.Types.DECIMAL}};/*
 Licensed under the Apache License, Version 2.0 (the "License"):
          http://www.apache.org/licenses/LICENSE-2.0
*/
Blockly.Blocks.io={};Blockly.Blocks.io.HUE=250;
Blockly.Blocks["io_digitalwrite"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/DigitalWrite");this.setColour(Blockly.Blocks.io.HUE);this.appendValueInput("STATE").appendField(Blockly.Msg.ARD_DIGITALWRITE).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.digitalPins),"PIN").appendField(Blockly.Msg.ARD_WRITE_TO).setCheck(Blockly.Types.BOOLEAN.checkList);this.setInputsInline(false);this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setTooltip(Blockly.Msg.ARD_DIGITALWRITE_TIP)},
updateFields:function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"PIN","digitalPins")}};
Blockly.Blocks["io_digitalread"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/DigitalRead");this.setColour(Blockly.Blocks.io.HUE);this.appendDummyInput().appendField(Blockly.Msg.ARD_DIGITALREAD).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.digitalPins),"PIN");this.setOutput(true,Blockly.Types.BOOLEAN.output);this.setTooltip(Blockly.Msg.ARD_DIGITALREAD_TIP)},getBlockType:function(){return Blockly.Types.BOOLEAN},updateFields:function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,
"PIN","digitalPins")}};
Blockly.Blocks["io_builtin_led"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/DigitalWrite");this.setColour(Blockly.Blocks.io.HUE);this.appendValueInput("STATE").appendField(Blockly.Msg.ARD_BUILTIN_LED).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.builtinLed),"BUILT_IN_LED").appendField("to").setCheck(Blockly.Types.BOOLEAN.checkList);this.setInputsInline(false);this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setTooltip(Blockly.Msg.ARD_BUILTIN_LED_TIP)},updateFields:function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,
"BUILT_IN_LED","builtinLed")},getBlockType:function(){return Blockly.Types.BOOLEAN}};
Blockly.Blocks["io_analogwrite"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/AnalogWrite");this.setColour(Blockly.Blocks.io.HUE);this.appendValueInput("NUM").appendField(Blockly.Msg.ARD_ANALOGWRITE).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.pwmPins),"PIN").appendField(Blockly.Msg.ARD_WRITE_TO).setCheck(Blockly.Types.NUMBER.output);this.setInputsInline(false);this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setTooltip(Blockly.Msg.ARD_ANALOGWRITE_TIP)},
updateFields:function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"PIN","pwmPins")},getBlockType:function(){return Blockly.Types.NUMBER}};
Blockly.Blocks["io_analogread"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/AnalogRead");this.setColour(Blockly.Blocks.io.HUE);this.appendDummyInput().appendField(Blockly.Msg.ARD_ANALOGREAD).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.analogPins),"PIN");this.setOutput(true,Blockly.Types.NUMBER.output);this.setTooltip(Blockly.Msg.ARD_ANALOGREAD_TIP)},getBlockType:function(){return Blockly.Types.NUMBER},updateFields:function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,
"PIN","analogPins")}};Blockly.Blocks["io_highlow"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/Constants");this.setColour(Blockly.Blocks.io.HUE);this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Blockly.Msg.ARD_HIGH,"HIGH"],[Blockly.Msg.ARD_LOW,"LOW"]]),"STATE");this.setOutput(true,Blockly.Types.BOOLEAN.output);this.setTooltip(Blockly.Msg.ARD_HIGHLOW_TIP)},getBlockType:function(){return Blockly.Types.NUMBER}};
Blockly.Blocks["io_pulsein"]={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ARD_PULSEREAD);this.appendValueInput("PULSETYPE").setCheck(Blockly.Types.BOOLEAN.check);this.appendDummyInput().appendField(Blockly.Msg.ARD_PULSEON).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.digitalPins),"PULSEPIN");this.setOutput(true);this.setInputsInline(true);this.setColour(Blockly.Blocks.io.HUE);this.setTooltip(Blockly.Msg.ARD_PULSE_TIP);this.setHelpUrl("https://www.mbed.cc/en/Reference/PulseIn")},
getBlockType:function(){return Blockly.Types.NUMBER}};
Blockly.Blocks["io_pulsetimeout"]={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ARD_PULSEREAD);this.appendValueInput("PULSETYPE").setCheck(Blockly.Types.BOOLEAN.check);this.appendDummyInput().appendField(Blockly.Msg.ARD_PULSEON).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.digitalPins),"PULSEPIN");this.appendDummyInput().appendField(Blockly.Msg.ARD_PULSETIMEOUT);this.appendValueInput("TIMEOUT").setCheck(Blockly.Types.NUMBER.output);this.appendDummyInput().appendField(Blockly.Msg.ARD_PULSETIMEOUT_MS);
this.setOutput(true);this.setInputsInline(true);this.setColour(Blockly.Blocks.io.HUE);this.setTooltip(Blockly.Msg.ARD_PULSETIMEOUT_TIP);this.setHelpUrl("https://www.mbed.cc/en/Reference/PulseIn")},getBlockType:function(){return Blockly.Types.NUMBER}};Blockly.Blocks.logo={};Blockly.Blocks.logo.HUE=180;Blockly.Blocks["ardublockly_name_top"]={init:function(){this.appendDummyInput().appendField("Ardublockly");this.setPreviousStatement(true);this.setColour(Blockly.Blocks.logo.HUE)}};Blockly.Blocks["ardublockly_name_bottom"]={init:function(){this.appendDummyInput().appendField("Ardublockly");this.setNextStatement(true);this.setColour(Blockly.Blocks.logo.HUE);this.setTooltip("")}};
Blockly.Blocks["ardublockly_plus_top_large"]={init:function(){this.appendValueInput("NAME").appendField("     +");this.setNextStatement(true);this.setColour(Blockly.Blocks.logo.HUE)}};Blockly.Blocks["ardublockly_plus_top_small"]={init:function(){this.appendValueInput("NAME").appendField("  +");this.setNextStatement(true);this.setColour(Blockly.Blocks.logo.HUE)}};
Blockly.Blocks["ardublockly_plus_bottom_large"]={init:function(){this.appendValueInput("NAME").appendField("     +");this.setPreviousStatement(true);this.setColour(Blockly.Blocks.logo.HUE)}};Blockly.Blocks["ardublockly_plus_bottom_small"]={init:function(){this.appendValueInput("NAME").appendField("  +");this.setPreviousStatement(true);this.setColour(Blockly.Blocks.logo.HUE)}};
Blockly.Blocks["ardublockly_plus_both_small"]={init:function(){this.appendValueInput("NAME").appendField("  +");this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.logo.HUE)}};Blockly.Blocks["ardublockly_plus_both_large"]={init:function(){this.appendValueInput("NAME").appendField("     +");this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.logo.HUE)}};
Blockly.Blocks["ardublockly_minus_large"]={init:function(){this.appendDummyInput().appendField("-     ");this.setInputsInline(false);this.setOutput(true);this.setColour(Blockly.Blocks.logo.HUE)}};Blockly.Blocks["ardublockly_minus_small"]={init:function(){this.appendDummyInput().appendField("-  ");this.setInputsInline(false);this.setOutput(true);this.setColour(Blockly.Blocks.logo.HUE)}};Blockly.Blocks.macro={};Blockly.Blocks.macro.HUE=300;
Blockly.Blocks["macro_get"]={init:function(){this.setHelpUrl(Blockly.Msg.MACRO_GET_HELPURL);this.setColour(Blockly.Blocks.macro.HUE);this.appendDummyInput().appendField(new Blockly.FieldMacro(Blockly.Msg.MACRO_DEFAULT_NAME),"MACRO_NAME");this.setOutput(true);this.setTooltip(Blockly.Msg.MACRO_GET_TOOLTIP);this.contextMenuMsg_=Blockly.Msg.MACRO_DEFINE_CREATE_SET},contextMenuType_:"macro_set",customContextMenu:function(options){var option={enabled:true};var name=this.getFieldValue("VAR");option.text=
this.contextMenuMsg_.replace("%1",name);var xmlField=goog.dom.createDom("field",null,name);xmlField.setAttribute("name","VAR");var xmlBlock=goog.dom.createDom("block",null,xmlField);xmlBlock.setAttribute("type",this.contextMenuType_);option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option)},getBlockType:function(){return[Blockly.Types.UNDEF,this.getFieldValue("VAR")]},getMacro:function(){var vars=[];for(var i=0,input;input=this.inputList[i];i++)for(var j=0,field;field=
input.fieldRow[j];j++)if(field instanceof Blockly.FieldMacro)vars.push(field.getValue());return vars},renameMacro:function(oldName,newName){for(var i=0,input;input=this.inputList[i];i++)for(var j=0,field;field=input.fieldRow[j];j++)if(field instanceof Blockly.FieldMacro&&Blockly.Names.equals(oldName,field.getValue()))field.setValue(newName)}};
Blockly.Blocks["macro_define"]={init:function(){this.appendValueInput("MACRO_DEFINE_AS").setCheck("Number").appendField("define").appendField(new Blockly.FieldMacro(Blockly.Msg.MACRO_DEFAULT_NAME),"MACRO_NAME").appendField("as");this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setColour(Blockly.Blocks.macro.HUE);this.setTooltip(Blockly.Msg.VARIABLES_SET_TOOLTIP);this.setHelpUrl(Blockly.Msg.VARIABLES_SET_HELPURL);this.contextMenuMsg_=Blockly.Msg.MACRO_DEFINE_CREATE_SET},contextMenuType_:"macro_get",
customContextMenu:Blockly.Blocks["macro_get"].customContextMenu,renameMacro:function(oldName,newName){for(var i=0,input;input=this.inputList[i];i++)for(var j=0,field;field=input.fieldRow[j];j++)if(field instanceof Blockly.FieldMacro&&Blockly.Names.equals(oldName,field.getValue()))field.setValue(newName)},getMacro:function(){var vars=[];for(var i=0,input;input=this.inputList[i];i++)for(var j=0,field;field=input.fieldRow[j];j++)if(field instanceof Blockly.FieldMacro)vars.push(field.getValue());return vars}};Blockly.Blocks.map={};Blockly.Blocks.map.HUE=230;
Blockly.Blocks["base_map"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/map");this.setColour(Blockly.Blocks.map.HUE);this.appendValueInput("NUM").appendField(Blockly.Msg.ARD_MAP).setCheck(Blockly.Types.NUMBER.checkList);this.appendValueInput("DMAX").appendField(Blockly.Msg.ARD_MAP_VAL).setCheck(Blockly.Types.NUMBER.checkList);this.appendDummyInput().appendField("]");this.setInputsInline(true);this.setOutput(true);this.setTooltip(Blockly.Msg.ARD_MAP_TIP)},getBlockType:function(){return Blockly.Types.NUMBER}};Blockly.Blocks.procedures.HUE=290;Blockly.Blocks["mbed_functions"]={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ARD_FUN_RUN_SETUP);this.appendStatementInput("SETUP_FUNC");this.appendDummyInput().appendField(Blockly.Msg.ARD_FUN_RUN_LOOP);this.appendStatementInput("LOOP_FUNC");this.setInputsInline(false);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.ARD_FUN_RUN_TIP);this.setHelpUrl("https://mbed.cc/en/Reference/Loop");this.contextMenu=false},getmbedLoopsInstance:function(){return true}};/*
 
 You may not use this file except in compliance with the License.
 You may obtain a copy of the License at
 {@link http://www.apache.org/licenses/LICENSE-2.0}
 @fileoverview Blocks for the mbed serial communication functions.
 Last modified on 2/03/2018 
*/
Blockly.Blocks.serial={};Blockly.Blocks.serial.HUE=160;Blockly.Blocks.serial_setup={};Blockly.Blocks.print_content={};Blockly.Blocks.serial_attach={};Blockly.Blocks.serial_print={};Blockly.Blocks.serial_getc={};
Blockly.Blocks.serial_setup.init=function(){this.setColour(Blockly.Blocks.serial.HUE);this.appendDummyInput().appendField("Serial Setup RX:","SERIAL_NAME").appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.serialPinsRX),"SERIAL_ID").appendField("TX:").appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.serialPinsTX),"SERIAL_ID_TX").appendField(Blockly.Msg.ARD_SERIAL_SPEED).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.serialSpeed),"SPEED").appendField(Blockly.Msg.ARD_SERIAL_BPS);
this.setInputsInline(true);this.setPreviousStatement(false,null);this.setNextStatement(true,null);this.setTooltip(Blockly.Msg.ARD_SERIAL_SETUP_TIP)};Blockly.Blocks.serial_setup.getSerialSetupInstance=function(){return Blockly.mbed.Boards.selected.serialMapper[this.getFieldValue("SERIAL_ID")]};
Blockly.Blocks.serial_setup.onchange=function(){if(!this.workspace)return;var serialId=this.getFieldValue("SERIAL_ID");var serialId_TX=this.getFieldValue("SERIAL_ID_TX");var serialRX=Blockly.mbed.Boards.selected.serialMapper[serialId];var serialTX=Blockly.mbed.Boards.selected.serialMapper[serialId_TX];if(serialRX==serialTX){this.setWarningText(null,"serial_rx_tx_mismatch");this.setFieldValue("%1 Setup RX:".replace("%1",serialRX),"SERIAL_NAME")}else{this.setWarningText(serialRX+" mismatches "+serialTX,
"serial_rx_tx_mismatch");this.setFieldValue("Serial Setup RX","SERIAL_NAME")}};Blockly.Blocks.serial_setup.updateFields=function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"SERIAL_ID","digitalPins");Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"SERIAL_ID_TX","digitalPins");Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"SPEED","serialSpeed")};
Blockly.Blocks.print_content.init=function(){this.appendValueInput("format_content").setCheck(null);this.setInputsInline(true);this.appendValueInput("join_content").setCheck(null).appendField("join");this.setInputsInline(false);this.setOutput(true,null);this.setColour(Blockly.Blocks.serial.HUE);this.setTooltip("print format extra content");this.setHelpUrl("")};
Blockly.Blocks.serial_attach.init=function(){this.appendDummyInput().appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.serialPins),"SERIAL_Pins").appendField("attach");this.appendStatementInput("function_body").setCheck(null);this.setInputsInline(true);this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setColour(Blockly.Blocks.serial.HUE);this.setTooltip("attach an interrupt function to configured serial");this.setHelpUrl("");this.arguments_=[]};
Blockly.Blocks.serial_print.init=function(){this.setColour(Blockly.Blocks.serial.HUE);this.appendValueInput("CONTENT").setCheck(Blockly.Types.TEXT.checkList).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.serialPins),"SERIAL_Pins").appendField(Blockly.Msg.ARD_SERIAL_PRINT);this.appendValueInput("CONTENT_STR").setCheck(null).appendField(new Blockly.FieldCheckbox("TRUE"),"NEW_LINE").appendField(Blockly.Msg.ARD_SERIAL_PRINT_NEWLINE);this.setInputsInline(false);this.setPreviousStatement(true,
null);this.setNextStatement(true,null);this.setTooltip(Blockly.Msg.ARD_SERIAL_PRINT_TIP)};
Blockly.Blocks.serial_print.onchange=function(){if(!this.workspace)return;var thisInstanceName=this.getFieldValue("SERIAL_Pins");var setupInstancePresent=false;var blocks=Blockly.mainWorkspace.getTopBlocks();for(var x=0;x<blocks.length;x++){var func=blocks[x].getSerialSetupInstance;if(func){var setupBlockInstanceName=func.call(blocks[x]);if(thisInstanceName==setupBlockInstanceName)setupInstancePresent=true}}if(!setupInstancePresent)this.setWarningText(Blockly.Msg.ARD_SERIAL_PRINT_WARN.replace("%1",thisInstanceName),
"serial_setup");else this.setWarningText(null,"serial_setup")};Blockly.Blocks.serial_print.updateFields=function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"SERIAL_Pins","serialPins")};Blockly.Blocks.serial_getc.init=function(){this.setOutput(true,null);this.setColour(Blockly.Blocks.serial.HUE);this.appendDummyInput("one_character").appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.serialPins),"SERIAL_Pins").appendField("getc");this.setInputsInline(false);this.setTooltip("Get one character from serial")};
Blockly.Blocks.serial_getc.onchange=function(){if(!this.workspace)return;var thisInstanceName=this.getFieldValue("SERIAL_Pins");var setupInstancePresent=false;var blocks=Blockly.mainWorkspace.getTopBlocks();for(var x=0;x<blocks.length;x++){var func=blocks[x].getSerialSetupInstance;if(func){var setupBlockInstanceName=func.call(blocks[x]);if(thisInstanceName==setupBlockInstanceName)setupInstancePresent=true}}if(!setupInstancePresent)this.setWarningText(Blockly.Msg.ARD_SERIAL_PRINT_WARN.replace("%1",
thisInstanceName),"serial_setup");else this.setWarningText(null,"serial_setup")};Blockly.Blocks.serial_getc.updateFields=function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"SERIAL_Pins","serialPins")};/*
 
 You may not use this file except in compliance with the License.
 You may obtain a copy of the License at
 {@link http://www.apache.org/licenses/LICENSE-2.0}
 @fileoverview mbed blocks for the Servo library.
 Last modified on 2/03/2018 
*/
Blockly.Blocks.servo={};Blockly.Blocks.servo.HUE=60;Blockly.Blocks.servo_write={};Blockly.Blocks.servo_read={};
Blockly.Blocks.servo_write.init=function(){this.setColour(Blockly.Blocks.servo.HUE);this.appendValueInput("SERVO_PULSEWIDTH").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_SERVO_WRITE).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.pwmPins),"SERVO_PIN").appendField("pulsewidth:");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["us","us"],["ms","ms"]]),"TimeDomain");this.setInputsInline(true);this.setPreviousStatement(true,null);this.setNextStatement(true,
null);this.setTooltip(Blockly.Msg.ARD_SERVO_WRITE_TIP)};Blockly.Blocks.servo_write.updateFields=function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"SERVO_PIN","pwmPins")};Blockly.Blocks.servo_read.init=function(){this.setColour(Blockly.Blocks.servo.HUE);this.appendDummyInput().appendField(Blockly.Msg.ARD_SERVO_READ).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.pwmPins),"SERVO_PIN");this.setOutput(true,Blockly.Types.NUMBER.output);this.setTooltip(Blockly.Msg.ARD_SERVO_READ_TIP)};
Blockly.Blocks.servo_read.getBlockType=function(){return Blockly.Types.NUMBER};Blockly.Blocks.servo_read.updateFields=function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"SERVO_PIN","pwmPins")};Blockly.Blocks.spi={};Blockly.Blocks.spi.HUE=170;
Blockly.Blocks["spi_setup"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/SPI");this.setColour(Blockly.Blocks.spi.HUE);var dropdown=new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.spi,function(option){var SPI1_CHOICE=option=="SPI1";this.sourceBlock_.updateShape_(SPI1_CHOICE)});this.appendDummyInput("Select").appendField(Blockly.Msg.ARD_SPI_SETUP).appendField(dropdown,"SPI_ID");this.appendDummyInput().appendField("CS").appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.digitalPins),"PIN");
this.appendValueInput("frequency").setCheck("Number").appendField("Frequency(MHz)");this.appendDummyInput().appendField(Blockly.Msg.ARD_SPI_SETUP_MODE).appendField(new Blockly.FieldDropdown([[Blockly.Msg.ARD_SPI_SETUP_MODE0,"0"],[Blockly.Msg.ARD_SPI_SETUP_MODE1,"1"],[Blockly.Msg.ARD_SPI_SETUP_MODE2,"2"],[Blockly.Msg.ARD_SPI_SETUP_MODE3,"3"]]),"SPI_MODE");this.setInputsInline(false);this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setTooltip(Blockly.Msg.ARD_SPI_SETUP_TIP)},
getSpiSetupInstance:function(){return this.getFieldValue("SPI_ID")},updateFields:function(){Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"SPI_ID","spi");Blockly.mbed.Boards.refreshBlockFieldDropdown(this,"SPI_CLOCK_DIVIDE","spiClockDivide")},mutationToDom:function(){var container=document.createElement("mutation");var SPI_CHOISE=this.getFieldValue("SPI_ID")=="SPI1";container.setAttribute("SPI_CHOISE",SPI_CHOISE);return container},domToMutation:function(xmlElement){var SPI_CHOISE=xmlElement.getAttribute("SPI_CHOISE")==
"true";this.updateShape_(SPI_CHOISE)},updateShape_:function(SPI_CHOISE){var SelectInput=this.getInput("SPI1_CHOICE");if(SPI_CHOISE){if(!SelectInput)this.appendDummyInput("SPI1_CHOICE").appendField("SPI1 ID").appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.spi1_choice),"SPI1_ID")}else if(SelectInput)this.removeInput("SPI1_CHOICE")}};
Blockly.Blocks["spi_transfer"]={init:function(){var slaveNone=[[Blockly.Msg.ARD_SPI_TRANS_NONE,"none"]];var digitalPinsExtended=slaveNone.concat(Blockly.mbed.Boards.selected.digitalPins);this.setHelpUrl("http://mbed.cc/en/Reference/SPITransfer");this.setColour(Blockly.Blocks.spi.HUE);this.appendDummyInput().appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.spi),"SPI_ID");this.appendValueInput("SPI_DATA").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_SPI_TRANS_VAL);
this.setInputsInline(true);this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setTooltip(Blockly.Msg.ARD_SPI_TRANS_TIP)},onchange:function(){if(!this.workspace)return;var thisInstanceName=this.getFieldValue("SPI_ID");var blocks=Blockly.mainWorkspace.getTopBlocks();var setupInstancePresent=false;for(var x=0,length_=blocks.length;x<length_;x++){var func=blocks[x].getSpiSetupInstance;if(func){var setupBlockInstanceName=func.call(blocks[x]);if(thisInstanceName==setupBlockInstanceName)setupInstancePresent=
true}}if(!setupInstancePresent)this.setWarningText(Blockly.Msg.ARD_SPI_TRANS_WARN1.replace("%1",thisInstanceName),"spi_setup");else this.setWarningText(null,"spi_setup")},getBlockType:function(){return Blockly.Types.NUMBER},updateFields:function(){var field=this.getField("SPI_SS");var fieldValue=field.getValue();var slaveNone=[[Blockly.Msg.ARD_SPI_TRANS_NONE,"none"]];field.menuGenerator_=slaveNone.concat(Blockly.mbed.Boards.selected["digitalPins"]);var currentValuePresent=false;for(var i=0,length_=
field.menuGenerator_.length;i<length_;i++)if(fieldValue==field.menuGenerator_[i][1])currentValuePresent=true;if(!currentValuePresent)this.setWarningText(Blockly.Msg.ARD_SPI_TRANS_WARN2.replace("%1",fieldValue),"bPin");else this.setWarningText(null,"bPin")}};
Blockly.Blocks["spi_transfer_return"]={init:function(){var slaveNone=[[Blockly.Msg.ARD_SPI_TRANS_NONE,"none"]];var digitalPinsExtended=slaveNone.concat(Blockly.mbed.Boards.selected.digitalPins);this.setHelpUrl("http://mbed.cc/en/Reference/SPITransfer");this.setColour(Blockly.Blocks.spi.HUE);this.appendDummyInput().appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.spi),"SPI_ID");this.appendValueInput("SPI_DATA").appendField(Blockly.Msg.ARD_SPI_TRANS_VAL);this.appendDummyInput().appendField(Blockly.Msg.ARD_SPI_TRANS_SLAVE).appendField(new Blockly.FieldDropdown(digitalPinsExtended),
"SPI_SS");this.setInputsInline(true);this.setOutput(true);this.setTooltip(Blockly.Msg.ARD_SPI_TRANSRETURN_TIP)},onchange:Blockly.Blocks["spi_transfer"].onchange,getBlockType:Blockly.Blocks["spi_transfer"].getBlockType,updateFields:Blockly.Blocks["spi_transfer"].updateFields};Blockly.Blocks.time={};Blockly.Blocks.time.HUE=140;Blockly.Blocks["time_delay"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/Delay");this.setColour(Blockly.Blocks.time.HUE);this.appendValueInput("DELAY_TIME_MILI").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_TIME_DELAY);this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_MS);this.setInputsInline(true);this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setTooltip(Blockly.Msg.ARD_TIME_DELAY_TIP)}};
Blockly.Blocks["time_delaymicros"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/DelayMicroseconds");this.setColour(Blockly.Blocks.time.HUE);this.appendValueInput("DELAY_TIME_MICRO").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_TIME_DELAY);this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_DELAY_MICROS);this.setInputsInline(true);this.setPreviousStatement(true,null);this.setNextStatement(true,null);this.setTooltip(Blockly.Msg.ARD_TIME_DELAY_MICRO_TIP)}};
Blockly.Blocks["time_millis"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/Millis");this.setColour(Blockly.Blocks.time.HUE);this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_MILLIS);this.setOutput(true,Blockly.Types.LARGE_NUMBER.output);this.setTooltip(Blockly.Msg.ARD_TIME_MILLIS_TIP)},getBlockType:function(){return Blockly.Types.LARGE_NUMBER}};
Blockly.Blocks["time_micros"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/Micros");this.setColour(Blockly.Blocks.time.HUE);this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_MICROS);this.setOutput(true,Blockly.Types.LARGE_NUMBER.output);this.setTooltip(Blockly.Msg.ARD_TIME_MICROS_TIP)},getBlockType:function(){return Blockly.Types.LARGE_NUMBER}};
Blockly.Blocks["infinite_loop"]={init:function(){this.setHelpUrl("");this.setColour(Blockly.Blocks.time.HUE);this.appendDummyInput().appendField(Blockly.Msg.ARD_TIME_INF);this.setInputsInline(true);this.setPreviousStatement(true);this.setTooltip(Blockly.Msg.ARD_TIME_INF_TIP)}};Blockly.Blocks.tone={};Blockly.Blocks.tone.HUE=250;
Blockly.Blocks["io_tone"]={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ARD_SETTONE).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.digitalPins),"TONEPIN");this.appendValueInput("FREQUENCY").setCheck(Blockly.Types.NUMBER.checkList).appendField(Blockly.Msg.ARD_TONEFREQ);this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.tone.HUE);this.setTooltip(Blockly.Msg.ARD_TONE_TIP);this.setHelpUrl("https://www.mbed.cc/en/Reference/tone")},
onchange:function(){var freq=Blockly.mbed.valueToCode(this,"FREQUENCY",Blockly.mbed.ORDER_ATOMIC);if(freq<31||freq>65535)this.setWarningText(Blockly.Msg.ARD_TONE_WARNING,"io_tone");else this.setWarningText(null,"io_tone")},getBlockType:function(){return Blockly.Types.NUMBER}};
Blockly.Blocks["io_notone"]={init:function(){this.appendDummyInput().appendField(Blockly.Msg.ARD_NOTONE).appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.digitalPins),"TONEPIN");this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.tone.HUE);this.setTooltip(Blockly.Msg.ARD_NOTONE_TIP);this.setHelpUrl("https://www.mbed.cc/en/Reference/noTone")},getBlockType:function(){return Blockly.Types.NUMBER}};Blockly.Blocks.variables.HUE=330;
Blockly.Blocks["variables_set_type"]={init:function(){this.setHelpUrl("http://mbed.cc/en/Reference/HomePage");this.setColour(Blockly.Blocks.variables.HUE);this.appendValueInput("VARIABLE_SETTYPE_INPUT");this.appendDummyInput().appendField(Blockly.Msg.ARD_VAR_AS).appendField(new Blockly.FieldDropdown(Blockly.Types.getValidTypeArray()),"VARIABLE_SETTYPE_TYPE");this.setInputsInline(true);this.setOutput(true);this.setTooltip(Blockly.Msg.ARD_VAR_AS_TIP)},getBlockType:function(){var blocklyTypeKey=this.getFieldValue("VARIABLE_SETTYPE_TYPE");
return Blockly.Types[blocklyTypeKey]}};Blockly.Blocks.procedures={};Blockly.Blocks.procedures.HUE=290;
Blockly.Blocks["InterruptIn"]={init:function(){var nameField=new Blockly.FieldTextInput(Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Procedures.rename);nameField.setSpellcheck(false);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(nameField,"NAME").appendField("","PARAMS").appendField("Pin").appendField(new Blockly.FieldDropdown(Blockly.mbed.Boards.selected.digitalPins),"InterruptPin");if(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT)this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);
this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip("Choose a pin bound to this interrupt function");this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL);this.arguments_=[];this.setStatements_(true);this.statementConnection_=null},validate:function(){var name=Blockly.Procedures.findLegalName(this.getFieldValue("NAME"),this);this.setFieldValue(name,"NAME")},setStatements_:function(hasStatements){if(this.hasStatements_===hasStatements)return;if(hasStatements){this.appendStatementInput("STACK").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO);
if(this.getInput("RETURN"))this.moveInputBefore("STACK","RETURN")}else this.removeInput("STACK",true);this.hasStatements_=hasStatements},updateParams_:function(){var badArg=false;var hash={};for(var i=0;i<this.arguments_.length;i++){if(hash["arg_"+this.arguments_[i].toLowerCase()]){badArg=true;break}hash["arg_"+this.arguments_[i].toLowerCase()]=true}if(badArg)this.setWarningText(Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING);else this.setWarningText(null);var paramString="";if(this.arguments_.length)paramString=
Blockly.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ");Blockly.Events.disable();this.setFieldValue(paramString,"PARAMS");Blockly.Events.enable()},dispose:function(){var name=this.getFieldValue("NAME");Blockly.Procedures.disposeCallers(name,this.workspace);this.constructor.prototype.dispose.apply(this,arguments)},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,false]},getVars:function(){return this.arguments_},renameVar:function(oldName,newName){var change=
false;for(var i=0;i<this.arguments_.length;i++)if(Blockly.Names.equals(oldName,this.arguments_[i])){this.arguments_[i]=newName;change=true}if(change){this.updateParams_();if(this.mutator.isVisible()){var blocks=this.mutator.workspace_.getAllBlocks();for(var i=0,block;block=blocks[i];i++)if(block.type=="procedures_mutatorarg"&&Blockly.Names.equals(oldName,block.getFieldValue("NAME")))block.setFieldValue(newName,"NAME")}}},customContextMenu:function(options){var option={enabled:true};var name=this.getFieldValue("NAME");
option.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",name);var xmlMutation=goog.dom.createDom("mutation");xmlMutation.setAttribute("name",name);for(var i=0;i<this.arguments_.length;i++){var xmlArg=goog.dom.createDom("arg");xmlArg.setAttribute("name",this.arguments_[i]);xmlMutation.appendChild(xmlArg)}var xmlBlock=goog.dom.createDom("block",null,xmlMutation);xmlBlock.setAttribute("type",this.callType_);option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option);if(!this.isCollapsed())for(var i=
0;i<this.arguments_.length;i++){var option={enabled:true};var name=this.arguments_[i];option.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",name);var xmlField=goog.dom.createDom("field",null,name);xmlField.setAttribute("name","VAR");var xmlBlock=goog.dom.createDom("block",null,xmlField);xmlBlock.setAttribute("type","variables_get");option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option)}},callType_:"procedures_callnoreturn",getVarType:function(varName){return Blockly.Types.UNDEF},
argsTypes:{},setArgsType:function(existingVars){var varNames=this.arguments_;for(var name in existingVars)for(var i=0,length_=varNames.length;i<length_;i++)if(name===varNames[i])this.argsTypes[name]=existingVars[name]},getArgType:function(varName){for(var name in this.argsTypes)if(name==varName)return this.argsTypes[varName];return null}};
Blockly.Blocks["procedures_defnoreturn"]={init:function(){var nameField=new Blockly.FieldTextInput(Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Procedures.rename);nameField.setSpellcheck(false);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(nameField,"NAME").appendField("","PARAMS");if(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT)this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP);
this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL);this.arguments_=[];this.setStatements_(true);this.statementConnection_=null},validate:function(){var name=Blockly.Procedures.findLegalName(this.getFieldValue("NAME"),this);this.setFieldValue(name,"NAME")},setStatements_:function(hasStatements){if(this.hasStatements_===hasStatements)return;if(hasStatements){this.appendStatementInput("STACK").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO);if(this.getInput("RETURN"))this.moveInputBefore("STACK",
"RETURN")}else this.removeInput("STACK",true);this.hasStatements_=hasStatements},updateParams_:function(){var badArg=false;var hash={};for(var i=0;i<this.arguments_.length;i++){if(hash["arg_"+this.arguments_[i].toLowerCase()]){badArg=true;break}hash["arg_"+this.arguments_[i].toLowerCase()]=true}if(badArg)this.setWarningText(Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING);else this.setWarningText(null);var paramString="";if(this.arguments_.length)paramString=Blockly.Msg.PROCEDURES_BEFORE_PARAMS+" "+
this.arguments_.join(", ");Blockly.Events.disable();this.setFieldValue(paramString,"PARAMS");Blockly.Events.enable()},mutationToDom:function(opt_paramIds){var container=document.createElement("mutation");if(opt_paramIds)container.setAttribute("name",this.getFieldValue("NAME"));for(var i=0;i<this.arguments_.length;i++){var parameter=document.createElement("arg");parameter.setAttribute("name",this.arguments_[i]);if(opt_paramIds&&this.paramIds_)parameter.setAttribute("paramId",this.paramIds_[i]);container.appendChild(parameter)}if(!this.hasStatements_)container.setAttribute("statements",
"false");return container},domToMutation:function(xmlElement){this.arguments_=[];for(var i=0,childNode;childNode=xmlElement.childNodes[i];i++)if(childNode.nodeName.toLowerCase()=="arg")this.arguments_.push(childNode.getAttribute("name"));this.updateParams_();Blockly.Procedures.mutateCallers(this);this.setStatements_(xmlElement.getAttribute("statements")!=="false")},decompose:function(workspace){var containerBlock=workspace.newBlock("procedures_mutatorcontainer");containerBlock.initSvg();if(this.getInput("RETURN"))containerBlock.setFieldValue(this.hasStatements_?
"TRUE":"FALSE","STATEMENTS");else containerBlock.getInput("STATEMENT_INPUT").setVisible(false);var connection=containerBlock.getInput("STACK").connection;for(var i=0;i<this.arguments_.length;i++){var paramBlock=workspace.newBlock("procedures_mutatorarg");paramBlock.initSvg();paramBlock.setFieldValue(this.arguments_[i],"NAME");paramBlock.oldLocation=i;connection.connect(paramBlock.previousConnection);connection=paramBlock.nextConnection}Blockly.Procedures.mutateCallers(this);return containerBlock},
compose:function(containerBlock){this.arguments_=[];this.paramIds_=[];var paramBlock=containerBlock.getInputTargetBlock("STACK");while(paramBlock){this.arguments_.push(paramBlock.getFieldValue("NAME"));this.paramIds_.push(paramBlock.id);paramBlock=paramBlock.nextConnection&&paramBlock.nextConnection.targetBlock()}this.updateParams_();Blockly.Procedures.mutateCallers(this);var hasStatements=containerBlock.getFieldValue("STATEMENTS");if(hasStatements!==null){hasStatements=hasStatements=="TRUE";if(this.hasStatements_!=
hasStatements)if(hasStatements){this.setStatements_(true);Blockly.Mutator.reconnect(this.statementConnection_,this,"STACK");this.statementConnection_=null}else{var stackConnection=this.getInput("STACK").connection;this.statementConnection_=stackConnection.targetConnection;if(this.statementConnection_){var stackBlock=stackConnection.targetBlock();stackBlock.unplug();stackBlock.bumpNeighbours_()}this.setStatements_(false)}}},dispose:function(){var name=this.getFieldValue("NAME");Blockly.Procedures.disposeCallers(name,
this.workspace);this.constructor.prototype.dispose.apply(this,arguments)},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,false]},getVars:function(){return this.arguments_},renameVar:function(oldName,newName){var change=false;for(var i=0;i<this.arguments_.length;i++)if(Blockly.Names.equals(oldName,this.arguments_[i])){this.arguments_[i]=newName;change=true}if(change){this.updateParams_();if(this.mutator.isVisible()){var blocks=this.mutator.workspace_.getAllBlocks();for(var i=
0,block;block=blocks[i];i++)if(block.type=="procedures_mutatorarg"&&Blockly.Names.equals(oldName,block.getFieldValue("NAME")))block.setFieldValue(newName,"NAME")}}},customContextMenu:function(options){var option={enabled:true};var name=this.getFieldValue("NAME");option.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",name);var xmlMutation=goog.dom.createDom("mutation");xmlMutation.setAttribute("name",name);for(var i=0;i<this.arguments_.length;i++){var xmlArg=goog.dom.createDom("arg");xmlArg.setAttribute("name",
this.arguments_[i]);xmlMutation.appendChild(xmlArg)}var xmlBlock=goog.dom.createDom("block",null,xmlMutation);xmlBlock.setAttribute("type",this.callType_);option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option);if(!this.isCollapsed())for(var i=0;i<this.arguments_.length;i++){var option={enabled:true};var name=this.arguments_[i];option.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",name);var xmlField=goog.dom.createDom("field",null,name);xmlField.setAttribute("name",
"VAR");var xmlBlock=goog.dom.createDom("block",null,xmlField);xmlBlock.setAttribute("type","variables_get");option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option)}},callType_:"procedures_callnoreturn",getVarType:function(varName){return Blockly.Types.UNDEF},argsTypes:{},setArgsType:function(existingVars){var varNames=this.arguments_;for(var name in existingVars)for(var i=0,length_=varNames.length;i<length_;i++)if(name===varNames[i])this.argsTypes[name]=existingVars[name]},
getArgType:function(varName){for(var name in this.argsTypes)if(name==varName)return this.argsTypes[varName];return null}};
Blockly.Blocks["procedures_defreturn"]={init:function(){var nameField=new Blockly.FieldTextInput(Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE,Blockly.Procedures.rename);nameField.setSpellcheck(false);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(nameField,"NAME").appendField("","PARAMS");this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);if(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT)this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT);
this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL);this.arguments_=[];this.setStatements_(true);this.statementConnection_=null},setStatements_:Blockly.Blocks["procedures_defnoreturn"].setStatements_,validate:Blockly.Blocks["procedures_defnoreturn"].validate,updateParams_:Blockly.Blocks["procedures_defnoreturn"].updateParams_,mutationToDom:Blockly.Blocks["procedures_defnoreturn"].mutationToDom,
domToMutation:Blockly.Blocks["procedures_defnoreturn"].domToMutation,decompose:Blockly.Blocks["procedures_defnoreturn"].decompose,compose:Blockly.Blocks["procedures_defnoreturn"].compose,dispose:Blockly.Blocks["procedures_defnoreturn"].dispose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,true]},getVars:Blockly.Blocks["procedures_defnoreturn"].getVars,renameVar:Blockly.Blocks["procedures_defnoreturn"].renameVar,customContextMenu:Blockly.Blocks["procedures_defnoreturn"].customContextMenu,
callType_:"procedures_callreturn",getVarType:Blockly.Blocks["procedures_defnoreturn"].getVarType,argsTypes:{},setArgsType:Blockly.Blocks["procedures_defnoreturn"].setArgsType,getArgType:Blockly.Blocks["procedures_defnoreturn"].getArgType,getReturnType:function(){var returnType=Blockly.Types.NULL;var returnBlock=this.getInputTargetBlock("RETURN");if(returnBlock)if(returnBlock.getBlockType)returnType=returnBlock.getBlockType();else returnType=Blockly.Types.getChildBlockType(returnBlock);return returnType}};
Blockly.Blocks["procedures_mutatorcontainer"]={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE);this.appendStatementInput("STACK");this.appendDummyInput("STATEMENT_INPUT").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox("TRUE"),"STATEMENTS");this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);this.contextMenu=false}};
Blockly.Blocks["procedures_mutatorarg"]={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(new Blockly.FieldTextInput("x",this.validator_),"NAME");this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP);this.contextMenu=false},validator_:function(newVar){newVar=newVar.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"");return newVar||null}};
Blockly.Blocks["procedures_callnoreturn"]={init:function(){this.appendDummyInput("TOPROW").appendField(this.id,"NAME");this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.procedures.HUE);this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL);this.arguments_=[];this.quarkConnections_={};this.quarkIds_=null},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(oldName,newName){if(Blockly.Names.equals(oldName,this.getProcedureCall())){this.setFieldValue(newName,
"NAME");this.setTooltip((this.outputConnection?Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP:Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",newName))}},setProcedureParameters_:function(paramNames,paramIds){var defBlock=Blockly.Procedures.getDefinition(this.getProcedureCall(),this.workspace);var mutatorOpen=defBlock&&defBlock.mutator&&defBlock.mutator.isVisible();if(!mutatorOpen){this.quarkConnections_={};this.quarkIds_=null}if(!paramIds)return;if(goog.array.equals(this.arguments_,paramNames)){this.quarkIds_=
paramIds;return}if(paramIds.length!=paramNames.length)throw"Error: paramNames and paramIds must be the same length.";this.setCollapsed(false);if(!this.quarkIds_){this.quarkConnections_={};if(paramNames.join("\n")==this.arguments_.join("\n"))this.quarkIds_=paramIds;else this.quarkIds_=[]}var savedRendered=this.rendered;this.rendered=false;for(var i=0;i<this.arguments_.length;i++){var input=this.getInput("ARG"+i);if(input){var connection=input.connection.targetConnection;this.quarkConnections_[this.quarkIds_[i]]=
connection;if(mutatorOpen&&connection&&paramIds.indexOf(this.quarkIds_[i])==-1){connection.disconnect();connection.getSourceBlock().bumpNeighbours_()}}}this.arguments_=[].concat(paramNames);this.updateShape_();this.quarkIds_=paramIds;if(this.quarkIds_)for(var i=0;i<this.arguments_.length;i++){var quarkId=this.quarkIds_[i];if(quarkId in this.quarkConnections_){var connection=this.quarkConnections_[quarkId];if(!Blockly.Mutator.reconnect(connection,this,"ARG"+i))delete this.quarkConnections_[quarkId]}}this.rendered=
savedRendered;if(this.rendered)this.render()},updateShape_:function(){for(var i=0;i<this.arguments_.length;i++){var field=this.getField("ARGNAME"+i);if(field){Blockly.Events.disable();field.setValue(this.arguments_[i]);Blockly.Events.enable()}else{field=new Blockly.FieldLabel(this.arguments_[i]);var input=this.appendValueInput("ARG"+i).setAlign(Blockly.ALIGN_RIGHT).appendField(field,"ARGNAME"+i);input.init()}}while(this.getInput("ARG"+i)){this.removeInput("ARG"+i);i++}var topRow=this.getInput("TOPROW");
if(topRow)if(this.arguments_.length){if(!this.getField("WITH")){topRow.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH");topRow.init()}}else if(this.getField("WITH"))topRow.removeField("WITH")},mutationToDom:function(){var container=document.createElement("mutation");container.setAttribute("name",this.getProcedureCall());for(var i=0;i<this.arguments_.length;i++){var parameter=document.createElement("arg");parameter.setAttribute("name",this.arguments_[i]);container.appendChild(parameter)}return container},
domToMutation:function(xmlElement){var name=xmlElement.getAttribute("name");this.renameProcedure(this.getProcedureCall(),name);var args=[];var paramIds=[];for(var i=0,childNode;childNode=xmlElement.childNodes[i];i++)if(childNode.nodeName.toLowerCase()=="arg"){args.push(childNode.getAttribute("name"));paramIds.push(childNode.getAttribute("paramId"))}this.setProcedureParameters_(args,paramIds)},renameVar:function(oldName,newName){for(var i=0;i<this.arguments_.length;i++)if(Blockly.Names.equals(oldName,
this.arguments_[i])){this.arguments_[i]=newName;this.getField("ARGNAME"+i).setValue(newName)}},customContextMenu:function(options){var option={enabled:true};option.text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;var name=this.getProcedureCall();var workspace=this.workspace;option.callback=function(){var def=Blockly.Procedures.getDefinition(name,workspace);def&&def.select()};options.push(option)}};
Blockly.Blocks["procedures_callreturn"]={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME");this.setOutput(true);this.setColour(Blockly.Blocks.procedures.HUE);this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL);this.arguments_=[];this.quarkConnections_={};this.quarkIds_=null},getProcedureCall:Blockly.Blocks["procedures_callnoreturn"].getProcedureCall,renameProcedure:Blockly.Blocks["procedures_callnoreturn"].renameProcedure,setProcedureParameters_:Blockly.Blocks["procedures_callnoreturn"].setProcedureParameters_,
updateShape_:Blockly.Blocks["procedures_callnoreturn"].updateShape_,mutationToDom:Blockly.Blocks["procedures_callnoreturn"].mutationToDom,domToMutation:Blockly.Blocks["procedures_callnoreturn"].domToMutation,renameVar:Blockly.Blocks["procedures_callnoreturn"].renameVar,customContextMenu:Blockly.Blocks["procedures_callnoreturn"].customContextMenu};
Blockly.Blocks["procedures_ifreturn"]={init:function(){this.appendValueInput("CONDITION").setCheck(Blockly.Types.BOOLEAN.checkList).appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.procedures.HUE);this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL);
this.hasReturnValue_=true},mutationToDom:function(){var container=document.createElement("mutation");container.setAttribute("value",Number(this.hasReturnValue_));return container},domToMutation:function(xmlElement){var value=xmlElement.getAttribute("value");this.hasReturnValue_=value==1;if(!this.hasReturnValue_){this.removeInput("VALUE");this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN)}},onchange:function(e){var legal=false;var block=this;do{if(this.FUNCTION_TYPES.indexOf(block.type)!=
-1){legal=true;break}block=block.getSurroundParent()}while(block);if(legal){if(block.type=="procedures_defnoreturn"&&this.hasReturnValue_){this.removeInput("VALUE");this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.hasReturnValue_=false}else if(block.type=="procedures_defreturn"&&!this.hasReturnValue_){this.removeInput("VALUE");this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.hasReturnValue_=true}this.setWarningText(null)}else this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING)},
FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};Blockly.Blocks.texts={};Blockly.Blocks.texts.HUE=160;
Blockly.Blocks["text"]={init:function(){this.setHelpUrl(Blockly.Msg.TEXT_TEXT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendDummyInput().appendField(this.newQuote_(true)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(false));this.setOutput(true,Blockly.Types.TEXT.output);var thisBlock=this;this.setTooltip(function(){var parent=thisBlock.getParent();return parent&&parent.getInputsInline()&&parent.tooltip||Blockly.Msg.TEXT_TEXT_TOOLTIP})},newQuote_:function(open){if(open==
this.RTL)var file="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg\x3d\x3d";else var file="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC";
return new Blockly.FieldImage(file,12,12,'"')},getBlockType:function(){return Blockly.Types.TEXT}};
Blockly.Blocks["text_join"]={init:function(){this.setHelpUrl(Blockly.Msg.TEXT_JOIN_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.itemCount_=2;this.updateShape_();this.setOutput(true,Blockly.Types.TEXT.output);this.setMutator(new Blockly.Mutator(["text_create_join_item"]));this.setTooltip(Blockly.Msg.TEXT_JOIN_TOOLTIP)},mutationToDom:function(){var container=document.createElement("mutation");container.setAttribute("items",this.itemCount_);return container},domToMutation:function(xmlElement){this.itemCount_=
parseInt(xmlElement.getAttribute("items"),10);this.updateShape_()},decompose:function(workspace){var containerBlock=workspace.newBlock("text_create_join_container");containerBlock.initSvg();var connection=containerBlock.getInput("STACK").connection;for(var i=0;i<this.itemCount_;i++){var itemBlock=workspace.newBlock("text_create_join_item");itemBlock.initSvg();connection.connect(itemBlock.previousConnection);connection=itemBlock.nextConnection}return containerBlock},compose:function(containerBlock){var itemBlock=
containerBlock.getInputTargetBlock("STACK");var connections=[];while(itemBlock){connections.push(itemBlock.valueConnection_);itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}for(var i=0;i<this.itemCount_;i++){var connection=this.getInput("ADD"+i).connection.targetConnection;if(connection&&connections.indexOf(connection)==-1)connection.disconnect()}this.itemCount_=connections.length;this.updateShape_();for(var i=0;i<this.itemCount_;i++)Blockly.Mutator.reconnect(connections[i],
this,"ADD"+i)},saveConnections:function(containerBlock){var itemBlock=containerBlock.getInputTargetBlock("STACK");var i=0;while(itemBlock){var input=this.getInput("ADD"+i);itemBlock.valueConnection_=input&&input.connection.targetConnection;i++;itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}},updateShape_:function(){if(this.itemCount_&&this.getInput("EMPTY"))this.removeInput("EMPTY");else if(!this.itemCount_&&!this.getInput("EMPTY"))this.appendDummyInput("EMPTY").appendField(this.newQuote_(true)).appendField(this.newQuote_(false));
for(var i=0;i<this.itemCount_;i++)if(!this.getInput("ADD"+i)){var input=this.appendValueInput("ADD"+i);if(i==0)input.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH)}while(this.getInput("ADD"+i)){this.removeInput("ADD"+i);i++}},newQuote_:Blockly.Blocks["text"].newQuote_,getBlockType:function(){return Blockly.Types.TEXT}};
Blockly.Blocks["text_create_join_container"]={init:function(){this.setColour(Blockly.Blocks.texts.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP);this.contextMenu=false}};
Blockly.Blocks["text_create_join_item"]={init:function(){this.setColour(Blockly.Blocks.texts.HUE);this.appendDummyInput().appendField(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP);this.contextMenu=false}};
Blockly.Blocks["text_append"]={init:function(){this.setHelpUrl(Blockly.Msg.TEXT_APPEND_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("TEXT").appendField(Blockly.Msg.TEXT_APPEND_TO).appendField(new Blockly.FieldVariable(Blockly.Msg.TEXT_APPEND_VARIABLE),"VAR").appendField(Blockly.Msg.TEXT_APPEND_APPENDTEXT);this.setPreviousStatement(true);this.setNextStatement(true);var thisBlock=this;this.setTooltip(function(){return Blockly.Msg.TEXT_APPEND_TOOLTIP.replace("%1",thisBlock.getFieldValue("VAR"))})},
getVarType:function(varName){return Blockly.Types.TEXT}};Blockly.Blocks["text_length"]={init:function(){this.jsonInit({"message0":Blockly.Msg.TEXT_LENGTH_TITLE,"args0":[{"type":"input_value","name":"VALUE","check":Blockly.Types.TEXT.checkList.concat("Array")}],"output":Blockly.Types.NUMBER.output,"colour":Blockly.Blocks.texts.HUE,"tooltip":Blockly.Msg.TEXT_LENGTH_TOOLTIP,"helpUrl":Blockly.Msg.TEXT_LENGTH_HELPURL})},getBlockType:function(){return Blockly.Types.NUMBER}};
Blockly.Blocks["text_isEmpty"]={init:function(){this.jsonInit({"message0":Blockly.Msg.TEXT_ISEMPTY_TITLE,"args0":[{"type":"input_value","name":"VALUE","check":Blockly.Types.TEXT.checkList.concat("Array")}],"output":Blockly.Types.BOOLEAN.output,"colour":Blockly.Blocks.texts.HUE,"tooltip":Blockly.Msg.TEXT_ISEMPTY_TOOLTIP,"helpUrl":Blockly.Msg.TEXT_ISEMPTY_HELPURL})},getBlockType:function(){return Blockly.Types.BOOLEAN}};
Blockly.Blocks["text_indexOf"]={init:function(){var OPERATORS=[[Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST,"FIRST"],[Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_INDEXOF_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.setOutput(true,Blockly.Types.NUMBER.output);this.appendValueInput("VALUE").setCheck(Blockly.Types.TEXT.checkList).appendField(Blockly.Msg.TEXT_INDEXOF_INPUT_INTEXT);this.appendValueInput("FIND").setCheck(Blockly.Types.TEXT.checkList).appendField(new Blockly.FieldDropdown(OPERATORS),
"END");if(Blockly.Msg.TEXT_INDEXOF_TAIL)this.appendDummyInput().appendField(Blockly.Msg.TEXT_INDEXOF_TAIL);this.setInputsInline(true);this.setTooltip(Blockly.Msg.TEXT_INDEXOF_TOOLTIP)}};
Blockly.Blocks["text_charAt"]={init:function(){this.WHERE_OPTIONS=[[Blockly.Msg.TEXT_CHARAT_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_CHARAT_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_CHARAT_FIRST,"FIRST"],[Blockly.Msg.TEXT_CHARAT_LAST,"LAST"],[Blockly.Msg.TEXT_CHARAT_RANDOM,"RANDOM"]];this.setHelpUrl(Blockly.Msg.TEXT_CHARAT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.setOutput(true,Blockly.Types.TEXT.output);this.appendValueInput("VALUE").setCheck(Blockly.Types.TEXT.checkList).appendField(Blockly.Msg.TEXT_CHARAT_INPUT_INTEXT);
this.appendDummyInput("AT");this.setInputsInline(true);this.updateAt_(true);this.setTooltip(Blockly.Msg.TEXT_CHARAT_TOOLTIP)},mutationToDom:function(){var container=document.createElement("mutation");var isAt=this.getInput("AT").type==Blockly.INPUT_VALUE;container.setAttribute("at",isAt);return container},domToMutation:function(xmlElement){var isAt=xmlElement.getAttribute("at")!="false";this.updateAt_(isAt)},updateAt_:function(isAt){this.removeInput("AT");this.removeInput("ORDINAL",true);if(isAt){this.appendValueInput("AT").setCheck(Blockly.Types.NUMBER.checkList);
if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}else this.appendDummyInput("AT");if(Blockly.Msg.TEXT_CHARAT_TAIL){this.removeInput("TAIL",true);this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_CHARAT_TAIL)}var menu=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(value){var newAt=value=="FROM_START"||value=="FROM_END";if(newAt!=isAt){var block=this.sourceBlock_;block.updateAt_(newAt);block.setFieldValue(value,"WHERE");
return null}return undefined});this.getInput("AT").appendField(menu,"WHERE")}};
Blockly.Blocks["text_getSubstring"]={init:function(){this["WHERE_OPTIONS_1"]=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]];this["WHERE_OPTIONS_2"]=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);
this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("STRING").setCheck(Blockly.Types.TEXT.checkList).appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);this.appendDummyInput("AT1");this.appendDummyInput("AT2");if(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL)this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL);this.setInputsInline(true);this.setOutput(true,Blockly.Types.TEXT.output);this.updateAt_(1,true);this.updateAt_(2,true);this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},
mutationToDom:function(){var container=document.createElement("mutation");var isAt1=this.getInput("AT1").type==Blockly.INPUT_VALUE;container.setAttribute("at1",isAt1);var isAt2=this.getInput("AT2").type==Blockly.INPUT_VALUE;container.setAttribute("at2",isAt2);return container},domToMutation:function(xmlElement){var isAt1=xmlElement.getAttribute("at1")=="true";var isAt2=xmlElement.getAttribute("at2")=="true";this.updateAt_(1,isAt1);this.updateAt_(2,isAt2)},updateAt_:function(n,isAt){this.removeInput("AT"+
n);this.removeInput("ORDINAL"+n,true);if(isAt){this.appendValueInput("AT"+n).setCheck(Blockly.Types.NUMBER.checkList);if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)this.appendDummyInput("ORDINAL"+n).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}else this.appendDummyInput("AT"+n);if(n==2&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL){this.removeInput("TAIL",true);this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL)}var menu=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+n],function(value){var newAt=
value=="FROM_START"||value=="FROM_END";if(newAt!=isAt){var block=this.sourceBlock_;block.updateAt_(n,newAt);block.setFieldValue(value,"WHERE"+n);return null}return undefined});this.getInput("AT"+n).appendField(menu,"WHERE"+n);if(n==1)this.moveInputBefore("AT1","AT2")}};
Blockly.Blocks["text_changeCase"]={init:function(){var OPERATORS=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("TEXT").setCheck(Blockly.Types.TEXT.checkList).appendField(new Blockly.FieldDropdown(OPERATORS),"CASE");this.setOutput(true,Blockly.Types.TEXT.output);
this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}};
Blockly.Blocks["text_trim"]={init:function(){var OPERATORS=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);this.appendValueInput("TEXT").setCheck(Blockly.Types.TEXT.checkList).appendField(new Blockly.FieldDropdown(OPERATORS),"MODE");this.setOutput(true,Blockly.Types.TEXT.output);this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)},
getBlockType:function(){return Blockly.Types.TEXT}};Blockly.Blocks["text_print"]={init:function(){this.jsonInit({"message0":Blockly.Msg.TEXT_PRINT_TITLE,"args0":[{"type":"input_value","name":"TEXT"}],"previousStatement":null,"nextStatement":null,"colour":Blockly.Blocks.texts.HUE,"tooltip":Blockly.Msg.TEXT_PRINT_TOOLTIP,"helpUrl":Blockly.Msg.TEXT_PRINT_HELPURL})}};
Blockly.Blocks["text_prompt_ext"]={init:function(){var TYPES=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,Blockly.Types.TEXT.output],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,Blockly.Types.NUMBER.output]];this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);var thisBlock=this;var dropdown=new Blockly.FieldDropdown(TYPES,function(newOp){thisBlock.updateType_(newOp)});this.appendValueInput("TEXT").appendField(dropdown,"TYPE");this.setOutput(true,Blockly.Types.TEXT.output);this.setTooltip(function(){return thisBlock.getFieldValue("TYPE")==
Blockly.Types.TEXT.output?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(newOp){this.outputConnection.setCheck(newOp==Blockly.Types.NUMBER.output?Blockly.Types.NUMBER.checkList:Blockly.Types.TEXT.checkList)},mutationToDom:function(){var container=document.createElement("mutation");container.setAttribute("type",this.getFieldValue("TYPE"));return container},domToMutation:function(xmlElement){this.updateType_(xmlElement.getAttribute("type"))},getBlockType:function(){return this.getFieldValue("TYPE")==
Blockly.Types.TEXT.output?Blockly.Types.TEXT:Blockly.Types.NUMBER}};
Blockly.Blocks["text_prompt"]={init:function(){var TYPES=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,Blockly.Types.TEXT.output],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,Blockly.Types.NUMBER.output]];var thisBlock=this;this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);this.setColour(Blockly.Blocks.texts.HUE);var dropdown=new Blockly.FieldDropdown(TYPES,function(newOp){thisBlock.updateType_(newOp)});this.appendDummyInput().appendField(dropdown,"TYPE").appendField(this.newQuote_(true)).appendField(new Blockly.FieldTextInput(""),
"TEXT").appendField(this.newQuote_(false));this.setOutput(true,Blockly.Types.TEXT.output);this.setTooltip(function(){return thisBlock.getFieldValue("TYPE")==Blockly.Types.TEXT.output?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},newQuote_:Blockly.Blocks["text"].newQuote_,updateType_:Blockly.Blocks["text_prompt_ext"].updateType_,mutationToDom:Blockly.Blocks["text_prompt_ext"].mutationToDom,domToMutation:Blockly.Blocks["text_prompt_ext"].domToMutation,getBlockType:function(){return this.getFieldValue("TYPE")==
Blockly.Types.NUMBER.output?Blockly.Types.NUMBER:Blockly.Types.TEXT}};Blockly.Blocks.variables={};Blockly.Blocks.variables.HUE=330;
Blockly.Blocks["variables_get"]={init:function(){this.setHelpUrl(Blockly.Msg.VARIABLES_GET_HELPURL);this.setColour(Blockly.Blocks.variables.HUE);this.appendDummyInput().appendField(new Blockly.FieldVariable(Blockly.Msg.VARIABLES_DEFAULT_NAME),"VAR");this.setOutput(true);this.setTooltip(Blockly.Msg.VARIABLES_GET_TOOLTIP);this.contextMenuMsg_=Blockly.Msg.VARIABLES_GET_CREATE_SET},contextMenuType_:"variables_set",customContextMenu:function(options){var option={enabled:true};var name=this.getFieldValue("VAR");
option.text=this.contextMenuMsg_.replace("%1",name);var xmlField=goog.dom.createDom("field",null,name);xmlField.setAttribute("name","VAR");var xmlBlock=goog.dom.createDom("block",null,xmlField);xmlBlock.setAttribute("type",this.contextMenuType_);option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option)},getBlockType:function(){return[Blockly.Types.UNDEF,this.getFieldValue("VAR")]},getVarType:function(varName){return[Blockly.Types.UNDEF,this.getFieldValue("VAR")]}};
Blockly.Blocks["variables_set"]={init:function(){this.jsonInit({"message0":Blockly.Msg.VARIABLES_SET,"args0":[{"type":"field_variable","name":"VAR","variable":Blockly.Msg.VARIABLES_DEFAULT_NAME},{"type":"input_value","name":"VALUE"}],"previousStatement":null,"nextStatement":null,"colour":Blockly.Blocks.variables.HUE,"tooltip":Blockly.Msg.VARIABLES_SET_TOOLTIP,"helpUrl":Blockly.Msg.VARIABLES_SET_HELPURL});this.contextMenuMsg_=Blockly.Msg.VARIABLES_SET_CREATE_GET},contextMenuType_:"variables_get",customContextMenu:Blockly.Blocks["variables_get"].customContextMenu,
getVarType:function(varName){return Blockly.Types.getChildBlockType(this)}};